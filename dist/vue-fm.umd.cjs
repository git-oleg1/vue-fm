(function(e,Re){typeof exports=="object"&&typeof module<"u"?module.exports=Re(require("vue"),require("plupload")):typeof define=="function"&&define.amd?define(["vue","plupload"],Re):(e=typeof globalThis<"u"?globalThis:e||self,e.VueFinder=Re(e.Vue,e.plupload))})(this,function(e,Re){var ho;"use strict";const gt=(r=>r&&typeof r=="object"&&"default"in r?r:{default:r})(Re),rt=(ho=document.querySelector('meta[name="csrf-token"]'))==null?void 0:ho.getAttribute("content"),ot=(r,{method:t="get",params:o={},json:n=!0,signal:l=null,headers:i={}})=>{const c={method:t};if(c.signal=l,c.headers={},Object.assign(c.headers,i),t=="get")r+="?"+new URLSearchParams(o);else{rt&&(c.headers["X-CSRF-Token"]=rt);let u=new FormData;for(const[y,m]of Object.entries(o))u.append(y,m);c.body=u}return fetch(r,c).then(u=>u.ok?n?u.json():u.text():u.json().then(Promise.reject.bind(Promise)))};function bo(r){return{all:r=r||new Map,on:function(t,o){var n=r.get(t);n?n.push(o):r.set(t,[o])},off:function(t,o){var n=r.get(t);n&&(o?n.splice(n.indexOf(o)>>>0,1):r.set(t,[]))},emit:function(t,o){var n=r.get(t);n&&n.slice().map(function(l){l(o)}),(n=r.get("*"))&&n.slice().map(function(l){l(t,o)})}}}function yt(r){let t=localStorage.getItem(r+"_storage");const o=e.ref(JSON.parse(t));e.watch(o,n);function n(){o.value===null||o.value===""?localStorage.removeItem(r+"_storage"):localStorage.setItem(r+"_storage",JSON.stringify(o.value))}function l(u,y){o.value=Object.assign({...o.value},{[u]:y})}function i(){o.value=null}return{getStore:(u,y=null)=>o.value===null||o.value===""?y:o.value.hasOwnProperty(u)?o.value[u]:y,setStore:l,clearStore:i}}const qt=e.ref("");function he(){function r(t){qt.value=t}return{apiUrl:qt,setApiUrl:r}}const vo={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},wo={key:0,class:"flex text-center"},So=["aria-label"],_o=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})],-1)],ko=["aria-label"],xo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1)],Do=["aria-label"],Eo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)],No=["aria-label"],Vo=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1)],Co={key:1,class:"flex text-center"},Mo={class:"pl-2"},$o={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Bo={key:0,class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},To=[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)],Ao={class:"flex text-center items-center justify-end"},Lo=["aria-label"],Oo=[e.createElementVNode("path",{d:"M95.73,10.81c10.53,7.09,19.6,17.37,26.48,29.86l0.67,1.22l-0.67,1.21c-6.88,12.49-15.96,22.77-26.48,29.86 C85.46,79.88,73.8,83.78,61.44,83.78c-12.36,0-24.02-3.9-34.28-10.81C16.62,65.87,7.55,55.59,0.67,43.1L0,41.89l0.67-1.22 c6.88-12.49,15.95-22.77,26.48-29.86C37.42,3.9,49.08,0,61.44,0C73.8,0,85.45,3.9,95.73,10.81L95.73,10.81z M60.79,22.17l4.08,0.39 c-1.45,2.18-2.31,4.82-2.31,7.67c0,7.48,5.86,13.54,13.1,13.54c2.32,0,4.5-0.62,6.39-1.72c0.03,0.47,0.05,0.94,0.05,1.42 c0,11.77-9.54,21.31-21.31,21.31c-11.77,0-21.31-9.54-21.31-21.31C39.48,31.71,49.02,22.17,60.79,22.17L60.79,22.17L60.79,22.17z M109,41.89c-5.5-9.66-12.61-17.6-20.79-23.11c-8.05-5.42-17.15-8.48-26.77-8.48c-9.61,0-18.71,3.06-26.76,8.48 c-8.18,5.51-15.29,13.45-20.8,23.11c5.5,9.66,12.62,17.6,20.8,23.1c8.05,5.42,17.15,8.48,26.76,8.48c9.62,0,18.71-3.06,26.77-8.48 C96.39,59.49,103.5,51.55,109,41.89L109,41.89z"},null,-1)],jo=[e.createElementVNode("path",{d:"M0.955,37.326c2.922-3.528,5.981-6.739,9.151-9.625C24.441,14.654,41.462,7.684,59.01,7.334 c6.561-0.131,13.185,0.665,19.757,2.416l-5.904,5.904c-4.581-0.916-9.168-1.324-13.714-1.233 c-15.811,0.316-31.215,6.657-44.262,18.533l0,0c-2.324,2.115-4.562,4.39-6.702,6.82c4.071,4.721,8.6,8.801,13.452,12.227 c2.988,2.111,6.097,3.973,9.296,5.586l-5.262,5.262c-2.782-1.504-5.494-3.184-8.12-5.039c-6.143-4.338-11.813-9.629-16.78-15.85 C-0.338,40.563-0.228,38.59,0.955,37.326L0.955,37.326L0.955,37.326z M96.03,0l5.893,5.893L28.119,79.699l-5.894-5.895L96.03,0 L96.03,0z M97.72,17.609c4.423,2.527,8.767,5.528,12.994,9.014c3.877,3.196,7.635,6.773,11.24,10.735 c1.163,1.277,1.22,3.171,0.226,4.507c-4.131,5.834-8.876,10.816-14.069,14.963C95.119,67.199,79.338,72.305,63.352,72.377 c-6.114,0.027-9.798-3.141-15.825-4.576l3.545-3.543c4.065,0.705,8.167,1.049,12.252,1.031c14.421-0.064,28.653-4.668,40.366-14.02 c3.998-3.191,7.706-6.939,11.028-11.254c-2.787-2.905-5.627-5.543-8.508-7.918c-4.455-3.673-9.042-6.759-13.707-9.273L97.72,17.609 L97.72,17.609z M61.44,18.143c2.664,0,5.216,0.481,7.576,1.359l-5.689,5.689c-0.619-0.079-1.248-0.119-1.886-0.119 c-4.081,0-7.775,1.654-10.449,4.328c-2.674,2.674-4.328,6.369-4.328,10.45c0,0.639,0.04,1.268,0.119,1.885l-5.689,5.691 c-0.879-2.359-1.359-4.912-1.359-7.576c0-5.995,2.43-11.42,6.358-15.349C50.02,20.572,55.446,18.143,61.44,18.143L61.44,18.143z M82.113,33.216c0.67,2.09,1.032,4.32,1.032,6.634c0,5.994-2.43,11.42-6.357,15.348c-3.929,3.928-9.355,6.357-15.348,6.357 c-2.313,0-4.542-0.361-6.633-1.033l5.914-5.914c0.238,0.012,0.478,0.018,0.719,0.018c4.081,0,7.775-1.652,10.449-4.326 s4.328-6.369,4.328-10.449c0-0.241-0.006-0.48-0.018-0.72L82.113,33.216L82.113,33.216z"},null,-1)],Io=["aria-label"],Po=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"},null,-1)],zo=["aria-label"],Ho={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ro={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"},Fo={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},Uo=["aria-label"],Ko={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"},Yo={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"},Wo=Object.assign({name:"VFToolbar"},{props:{data:Object},setup(r){const t=e.inject("emitter"),{getStore:o,setStore:n}=e.inject("storage"),{t:l}=e.inject("i18n"),i=e.ref(o("viewport","grid")),c=e.ref([]),u=e.ref(o("full-screen",!1)),y=e.ref(!1);t.on("vf-show-hidden-toggle",()=>{y.value=!y.value});const m=e.ref("");t.on("vf-search-query",({newQuery:D})=>{m.value=D});const f=e.inject("loadingState"),g=()=>f.value,v=()=>{u.value=!u.value,t.emit("vf-fullscreen-toggle")};return t.on("vf-nodes-selected",D=>{c.value=D}),t.on("vf-view-toggle",D=>{n("viewport",D),i.value=D}),(D,_)=>(e.openBlock(),e.createElementBlock("div",vo,[m.value.length?(e.openBlock(),e.createElementBlock("div",Co,[e.createElementVNode("div",Mo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Search results for"))+" ",1),e.createElementVNode("span",$o,e.toDisplayString(m.value),1)]),g()?(e.openBlock(),e.createElementBlock("svg",Bo,To)):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",wo,[e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:_[0]||(_[0]=k=>e.unref(t).emit("vf-modal-show",{type:"new-folder",items:c.value}))},_o,8,So),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:_[1]||(_[1]=k=>c.value.length!=1||e.unref(t).emit("vf-modal-show",{type:"rename",items:c.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([c.value.length==1?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},xo,2))],8,ko),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:_[2]||(_[2]=k=>!c.value.length||e.unref(t).emit("vf-modal-show",{type:"delete",items:c.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([c.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Eo,2))],8,Do),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:_[3]||(_[3]=k=>e.unref(t).emit("vf-modal-show",{type:"upload",items:c.value}))},Vo,8,No)])),e.createElementVNode("div",Ao,[e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("\u0421\u043A\u0440\u044B\u0442\u044B\u0435 \u0444\u0430\u0439\u043B\u044B"),"data-microtip-position":"bottom",role:"tooltip"},[y.value?(e.openBlock(),e.createElementBlock("svg",{key:0,onClick:_[4]||(_[4]=k=>e.unref(t).emit("vf-show-hidden-toggle")),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 83.78","stroke-linecap":"round","stroke-linejoin":"round","xml:space":"preserve","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer fill-gray-500 hover:fill-cyan-700 dark:fill-gray-400 dark:hover:fill-gray-300"},Oo)):(e.openBlock(),e.createElementBlock("svg",{key:1,onClick:_[5]||(_[5]=k=>e.unref(t).emit("vf-show-hidden-toggle")),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 83.78","stroke-linecap":"round","stroke-linejoin":"round","xml:space":"preserve","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer fill-gray-500 hover:fill-cyan-700 dark:fill-gray-400 dark:hover:fill-gray-300"},jo))],8,Lo),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Dark Mode"),"data-microtip-position":"bottom",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:_[6]||(_[6]=k=>e.unref(t).emit("vf-darkMode-toggle")),viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6 m-auto cursor-pointer stroke-sky-500 fill-sky-100 hover:stroke-sky-600 dark:stroke-gray-400 dark:fill-gray-400/20 dark:hover:stroke-gray-300"},Po))],8,Io),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:v},[(e.openBlock(),e.createElementBlock("svg",Ho,[u.value?(e.openBlock(),e.createElementBlock("path",Ro)):(e.openBlock(),e.createElementBlock("path",Fo))]))],8,zo),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:_[7]||(_[7]=k=>m.value.length||e.unref(t).emit("vf-view-toggle",i.value=="list"?"grid":"list"))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([m.value.length?"stroke-gray-200  dark:stroke-gray-700":"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[i.value=="grid"?(e.openBlock(),e.createElementBlock("path",Ko)):e.createCommentVNode("",!0),i.value=="list"?(e.openBlock(),e.createElementBlock("path",Yo)):e.createCommentVNode("",!0)],2))],8,Uo)])]))}});var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gt={exports:{}};(function(r,t){(function(o,n){r.exports=n()})(Xo,function(){function o(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function n(h,d){for(var a=0;a<d.length;a++){var b=d[a];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}function l(h,d,a){return d&&n(h.prototype,d),a&&n(h,a),h}function i(h,d,a){return d in h?Object.defineProperty(h,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):h[d]=a,h}function c(h,d){var a=Object.keys(h);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(h);d&&(b=b.filter(function(s){return Object.getOwnPropertyDescriptor(h,s).enumerable})),a.push.apply(a,b)}return a}function u(h){for(var d=1;d<arguments.length;d++){var a=arguments[d]!=null?arguments[d]:{};d%2?c(Object(a),!0).forEach(function(b){i(h,b,a[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(b){Object.defineProperty(h,b,Object.getOwnPropertyDescriptor(a,b))})}return h}function y(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),d&&f(h,d)}function m(h){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},m(h)}function f(h,d){return f=Object.setPrototypeOf||function(b,s){return b.__proto__=s,b},f(h,d)}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function v(h,d,a){return g()?v=Reflect.construct:v=function(s,p,w){var x=[null];x.push.apply(x,p);var B=Function.bind.apply(s,x),P=new B;return w&&f(P,w.prototype),P},v.apply(null,arguments)}function D(h){return Function.toString.call(h).indexOf("[native code]")!==-1}function _(h){var d=typeof Map=="function"?new Map:void 0;return _=function(b){if(b===null||!D(b))return b;if(typeof b!="function")throw new TypeError("Super expression must either be null or a function");if(typeof d<"u"){if(d.has(b))return d.get(b);d.set(b,s)}function s(){return v(b,arguments,m(this).constructor)}return s.prototype=Object.create(b.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),f(s,b)},_(h)}function k(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function E(h,d){return d&&(typeof d=="object"||typeof d=="function")?d:k(h)}function A(h){var d=g();return function(){var b=m(h),s;if(d){var p=m(this).constructor;s=Reflect.construct(b,arguments,p)}else s=b.apply(this,arguments);return E(this,s)}}function C(h,d){for(;!Object.prototype.hasOwnProperty.call(h,d)&&(h=m(h),h!==null););return h}function V(h,d,a){return typeof Reflect<"u"&&Reflect.get?V=Reflect.get:V=function(s,p,w){var x=C(s,p);if(!!x){var B=Object.getOwnPropertyDescriptor(x,p);return B.get?B.get.call(w):B.value}},V(h,d,a||h)}function L(h,d){return M(h)||X(h,d)||q(h,d)||ae()}function j(h){return S(h)||R(h)||q(h)||se()}function S(h){if(Array.isArray(h))return oe(h)}function M(h){if(Array.isArray(h))return h}function R(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)}function X(h,d){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(h)))){var a=[],b=!0,s=!1,p=void 0;try{for(var w=h[Symbol.iterator](),x;!(b=(x=w.next()).done)&&(a.push(x.value),!(d&&a.length===d));b=!0);}catch(B){s=!0,p=B}finally{try{!b&&w.return!=null&&w.return()}finally{if(s)throw p}}return a}}function q(h,d){if(!!h){if(typeof h=="string")return oe(h,d);var a=Object.prototype.toString.call(h).slice(8,-1);if(a==="Object"&&h.constructor&&(a=h.constructor.name),a==="Map"||a==="Set")return Array.from(h);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oe(h,d)}}function oe(h,d){(d==null||d>h.length)&&(d=h.length);for(var a=0,b=new Array(d);a<d;a++)b[a]=h[a];return b}function se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=function(d,a,b){var s=d.x,p=d.y,w=b.x,x=b.y,B={"+":{x:s+w,y:p+x},"-":{x:s-w,y:p-x},"*":{x:s*w,y:p*x},"/":{x:s/w,y:p/x}};return B[a]},N=function(d){return{x:d.left,y:d.top}},T=function(d){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{left:d.x,top:d.y,right:d.x,bottom:d.y,width:a,height:a}},$=function(d){return{x:d,y:d}},Z=function(h,d,a){window.addEventListener("resize",d),window.addEventListener("scroll",d),h.forEach(function(b,s){a.observe(b,{childList:s!==0,attributes:!0})})},z=function(h){var d=ze(h);return d.x||d.y?!0:h instanceof HTMLDocument?h.body?!!(h.body.scrollTop=1):!!(h.documentElement.scrollTop=1):!!(h.scrollTop=1)},K=function(){var h=document.createElement("div");return h.style.position="fixed",h.style.overflow="hidden",h.style.pointerEvents="none",h.style.zIndex="999999999999999999",h},ce=function(h){var d=document.createElement("div");return d.style.position="absolute",h||(d.style.background="rgba(0, 0, 255, 0.1)",d.style.border="1px solid rgba(0, 0, 255, 0.45)",d.style.display="none",d.style.pointerEvents="none"),d},pt=function(h,d){var a;return function(){for(var b=arguments.length,s=new Array(b),p=0;p<b;p++)s[p]=arguments[p];var w=function(){a=null,h.apply(void 0,s)};clearTimeout(a),a=setTimeout(w,d)}},Pe=function(){var h,d,a,b;return{y:((h=document.body)===null||h===void 0?void 0:h.scrollTop)||((d=document.documentElement)===null||d===void 0?void 0:d.scrollTop)||0,x:((a=document.body)===null||a===void 0?void 0:a.scrollLeft)||((b=document.documentElement)===null||b===void 0?void 0:b.scrollLeft)||0}},Wt=function(h,d){if(h instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var a=h.getBoundingClientRect();return{top:a.top,left:a.left,bottom:a.bottom,right:a.right,width:(h.clientWidth||a.width)*d,height:(h.clientHeight||a.height)*d}},ze=function(h){return!h||h instanceof Document?Pe():{x:h.scrollLeft>=0?h.scrollLeft:Pe().x,y:h.scrollTop>=0?h.scrollTop:Pe().y}},uo=function(h){var d=h.elementRect,a=h.containerRect,b=h.tolerance,s=b===void 0?{x:0,y:0}:b,p=[];return d.top-s.y<a.top&&p.push("top"),d.left-s.x<a.left&&p.push("left"),d.bottom+s.y>a.bottom&&p.push("bottom"),d.right+s.y>a.right&&p.push("right"),p},ld=function(h){var d=h.event;return{x:d.clientX,y:d.clientY}},cd=function(h){var d=h.scrollAmount,a=h.initialPointerPos,b=h.pointerPos,s={};return b.x>a.x-d.x?(s.left=a.x-d.x,s.width=b.x-a.x+d.x):(s.left=b.x,s.width=a.x-b.x-d.x),b.y>a.y-d.y?(s.top=a.y-d.y,s.height=b.y-a.y+d.y):(s.top=b.y,s.height=a.y-b.y-d.y),s},fo=function(d){var a={x:0,y:0},b=window.getComputedStyle(d);if(!b.transform||b.transform==="none")return a;if(b.transform.indexOf("3d")>=0){var s=b.transform.trim().match(/matrix3d\((.*?)\)/);if(s&&s.length){var p,w=(p=s[1])===null||p===void 0?void 0:p.split(",");a.x=parseInt(w[12])||0,a.y=parseInt(w[13])||0}return a}else{var x=b.transform.trim().match(/matrix\((.*?)\)/);if(x&&x.length){var B,P=(B=x[1])===null||B===void 0?void 0:B.split(",");a.x=parseInt(P[4])||0,a.y=parseInt(P[5])||0}return a}},dd=function(d){var a=d.style.transform;if(!a||a.indexOf("translate")<0)return fo(d);var b={x:0,y:0},s=a.trim().match(/translate[3dD]*?\(.*?\)/);if(s){var p,w=(p=s[0])===null||p===void 0?void 0:p.split("(");if(w){var x,B=(x=w[1])===null||x===void 0?void 0:x.split(",");b.x=parseInt(B[0])||0,b.y=parseInt(B[1])||0}}return!b.x&&!b.x?fo(d):b},hd=function(d){var a=d.style,b={x:parseInt(a.left)||0,y:parseInt(a.top)||0};if(!b.x&&!b.x){var s=window.getComputedStyle(d);return{x:parseInt(s.left)||0,y:parseInt(s.top)||0}}return b},ud=function(h,d){return d?dd(h):hd(h)},fd=function(h){var d=h.element,a=h.edges,b=h.elementRect,s=h.containerRect,p=h.elementPos,w=h.useTransform;a.includes("top")&&tt(d,{y:p.y+s.top-b.top,x:p.x},w),a.includes("left")&&tt(d,{y:p.y,x:p.x+s.left-b.left},w),a.includes("bottom")&&tt(d,{y:p.y+s.bottom-b.bottom,x:p.x},w),a.includes("right")&&tt(d,{y:p.y,x:p.x+s.right-b.right},w)},mo=function(h){var d=h.computedStyle,a=h.node,b=d.position,s=b==="absolute"||b==="relative"||b==="fixed";!(a instanceof HTMLDocument)&&!s&&(a.style.position="relative")},md=function(h){var d=h.shiftKey,a=h.keyboardDragSpeed,b=h.zoom,s=h.key,p=h.dragKeys,w=h.scrollDiff,x=h.canScroll,B=h.scrollCallback,P={x:0,y:0},I=d?a*4*b:a*b;return p.left.includes(s)&&(P.x=w.x||-I,!d&&!w.x&&x&&B(["left"],a)),p.right.includes(s)&&(P.x=w.x||I,!d&&!w.x&&x&&B(["right"],a)),p.up.includes(s)&&(P.y=w.y||-I,!d&&!w.y&&x&&B(["top"],a)),p.down.includes(s)&&(P.y=w.y||I,!d&&!w.y&&x&&B(["bottom"],a)),P},pd=function(h){var d=h.element,a=h.force,b=h.multiSelectionToggle,s=h.SelectedSet,p=h.hoverClassName;d.classList.contains(p)&&!a||(s.has(d)?b&&s.delete(d):s.add(d),d.classList.add(p))},gd=function(h){var d=h.element,a=h.force,b=h.SelectedSet,s=h.PrevSelectedSet,p=h.hoverClassName;if(!d.classList.contains(p)&&!a)return!1;var w=b.has(d),x=s.has(d);w&&!x?b.delete(d):!w&&x&&b.add(d),d.classList.remove(p)},et=function(d,a,b){return console.warn('[DragSelect] TypeIssue: setting "'.concat(d,'" is not of type "').concat(a,'".'))},Y=function(d,a,b,s){if(a===void 0)return b?i({},d,s):{};if(a===null)return i({},d,null);var p=!0,w=!1,x=typeof s=="string";x&&(p=typeof a=="string"||a instanceof String),x&&!p&&(w=!0,et(d,"string"));var B=!isNaN(s)&&typeof s=="number";B&&(p=!isNaN(a)&&typeof a=="number"),B&&!p&&(w=!0,et(d,"number"));var P=Object.prototype.toString.call(s)==="[object Object]";P&&(p=Object.prototype.toString.call(a)==="[object Object]"),P&&!p&&(w=!0,et(d,"object"));var I=typeof s=="boolean";I&&(p=typeof a=="boolean"),I&&!p&&(w=!0,et(d,"boolean"));var ne=Array.isArray(s);ne&&(p=Array.isArray(a)),ne&&!p&&(w=!0,et(d,"array"));var de=w||b;return d==="dragKeys"&&p?i({},d,Object.assign(s,a)):d==="dragKeys"&&!p?de?i({},d,s):{}:p?i({},d,a):de?i({},d,s):{}},yd=function(h,d){return u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({},Y("area",h.area,d,document)),Y("selectables",h.selectables,d,null)),Y("autoScrollSpeed",h.autoScrollSpeed,d,5)),Y("overflowTolerance",h.overflowTolerance,d,{x:25,y:25})),Y("zoom",h.zoom,d,1)),Y("customStyles",h.customStyles,d,!1)),Y("multiSelectMode",h.multiSelectMode,d,!1)),Y("multiSelectToggling",h.multiSelectToggling,d,!0)),Y("multiSelectKeys",h.multiSelectKeys,d,["Control","Shift","Meta"])),Y("selector",h.selector,d,null)),Y("draggability",h.draggability,d,!0)),Y("immediateDrag",h.immediateDrag,d,!0)),Y("keyboardDrag",h.keyboardDrag,d,!0)),Y("dragKeys",h.dragKeys,d,{up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]})),Y("keyboardDragSpeed",h.keyboardDragSpeed,d,10)),Y("useTransform",h.useTransform,d,!0)),Y("hoverClass",h.hoverClass,d,"ds-hover")),Y("selectableClass",h.selectableClass,d,"ds-selectable")),Y("selectedClass",h.selectedClass,d,"ds-selected")),Y("selectorClass",h.selectorClass,d,"ds-selector")),Y("selectorAreaClass",h.selectorAreaClass,d,"ds-selector-area"))},Xt=function(h,d){return h.left<d.right&&h.right>d.left&&h.top<d.bottom&&h.bottom>d.top},po=function(h){var d=h.element,a=h.posDirection,b=h.containerRect,s=h.useTransform,p=ud(d,s),w=H(p,"+",a);tt(d,w,s);var x=d.getBoundingClientRect(),B=uo({elementRect:x,containerRect:b});fd({element:d,edges:B,elementRect:x,containerRect:b,elementPos:w,useTransform:s})},bd=function(h,d){window.removeEventListener("resize",d),window.removeEventListener("scroll",d),h.disconnect()},vd=function(h,d,a){if(!!d.length){var b=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,s=h instanceof HTMLDocument?b||document.body:h,p=d.includes("top")&&s.scrollTop>0,w=d.includes("bottom")&&s.scrollTop<s.scrollHeight,x=d.includes("left")&&s.scrollLeft>0,B=d.includes("right")&&s.scrollLeft<s.scrollWidth;p&&(s.scrollTop-=1*a),w&&(s.scrollTop+=1*a),x&&(s.scrollLeft-=1*a),B&&(s.scrollLeft+=1*a)}},tt=function(h,d,a){if(a){var b=h.style.transform;h.style.transform="translate3d(".concat(d.x,"px,").concat(d.y,"px,1px) ").concat(b.replace(/translate.*?\)/g,""))}else h.style.left="".concat(d.x,"px"),h.style.top="".concat(d.y,"px");return h},wd=function(h){for(var d=h.subscribe,a=h.publish,b=h.Interaction,s=h.SelectedSet,p={"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(I){return I.event}}],"Interaction:end":[{name:"callback"}]},w=function(){var I=L(B[x],2),ne=I[0],de=I[1];["pre",!1].forEach(function(Q){return d(Q?"".concat(ne,":").concat(Q):ne,function($e){return de.forEach(function(G){return(!G.condition||G.condition($e))&&a(Q?"".concat(Q).concat(G.name):G.name,u({items:s.elements,isDragging:b.isDragging},$e))})})})},x=0,B=Object.entries(p);x<B.length;x++)w()},He=function(h){return h?!Array.isArray(h)&&(h instanceof HTMLElement||h instanceof SVGElement)?[h]:j(h):[]},go=function(h,d){h.style.left="".concat(d.left,"px"),h.style.top="".concat(d.top,"px"),h.style.width="".concat(d.width,"px"),h.style.height="".concat(d.height,"px")},Sd=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"DS",void 0),i(this,"_modificationCallback",void 0),i(this,"_modificationObserver",void 0),i(this,"_zoom",void 0),i(this,"_node",void 0),i(this,"_parentNodes",void 0),i(this,"_computedStyle",void 0),i(this,"_computedBorder",void 0),i(this,"_rect",void 0),i(this,"setArea",function(s){a._node=s,mo({computedStyle:a.computedStyle,node:a._node}),setTimeout(function(){a.DS.PubSub.publish("Area:modified:pre",{item:a}),a.reset(),a.DS.PubSub.publish("Area:modified",{item:a})})}),i(this,"start",function(){Z(a.parentNodes,a._modificationCallback,a._modificationObserver)}),i(this,"reset",function(){a._computedStyle=void 0,a._rect=void 0,a._computedBorder=void 0,a._parentNodes=void 0}),i(this,"stop",function(){bd(a._modificationObserver,a._modificationCallback),a.reset()}),i(this,"scroll",function(s,p){var w={scroll_directions:s,scroll_multiplier:p};a.DS.PubSub.publish("Area:scroll:pre",w),vd(a._node,s,p),a.DS.PubSub.publish("Area:scroll",w)}),this.DS=b,this.setArea(this.DS.stores.SettingsStore.s.area),this.DS.PubSub.subscribe("Settings:updated:area",function(s){var p=s.settings;return a.setArea(p.area)}),this._modificationCallback=pt(function(s){a.DS.PubSub.publish("Area:modified:pre",{event:s,item:a}),a.reset(),a.DS.PubSub.publish("Area:modified",{event:s,item:a})},60),this._modificationObserver=new MutationObserver(this._modificationCallback),this.DS.PubSub.subscribe("Interaction:init",this.start),this.DS.PubSub.subscribe("Interaction:end",this.reset)}return l(h,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof HTMLDocument?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=Wt(this.HTMLNode,this.DS.stores.SettingsStore.s.zoom)}},{key:"parentNodes",get:function(){if(this._parentNodes)return this._parentNodes;var a=function b(s){var p,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=(p=s[w])===null||p===void 0?void 0:p.parentNode;return x?(s.push(x),w++,b(s,w)):s};return this._parentNodes=a([this.HTMLNode]),this._parentNodes}}]),h}(),_d=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_prevCursorPos",void 0),i(this,"_prevScrollPos",void 0),i(this,"_elements",[]),i(this,"_dragKeys",void 0),i(this,"_dragKeysFlat",[]),i(this,"assignDragkeys",function(){a._dragKeys={up:a.DS.stores.SettingsStore.s.dragKeys.up.map(function(s){return s.toLowerCase()}),down:a.DS.stores.SettingsStore.s.dragKeys.down.map(function(s){return s.toLowerCase()}),left:a.DS.stores.SettingsStore.s.dragKeys.left.map(function(s){return s.toLowerCase()}),right:a.DS.stores.SettingsStore.s.dragKeys.right.map(function(s){return s.toLowerCase()})},a._dragKeysFlat=[].concat(j(a._dragKeys.up),j(a._dragKeys.down),j(a._dragKeys.left),j(a._dragKeys.right))}),i(this,"keyboardDrag",function(s){var p=s.event,w=s.key,x=w.toLowerCase();if(!(!a.DS.stores.SettingsStore.s.keyboardDrag||!a._dragKeysFlat.includes(x)||!a.DS.SelectedSet.size||!a.DS.stores.SettingsStore.s.draggability||a.DS.continue)){var B={event:p,isDragging:!0,isDraggingKeyboard:!0};a.DS.publish(["Interaction:start:pre","Interaction:start"],B),a._elements=a.DS.getSelection(),a.handleZIndex(!0);var P=md({shiftKey:a.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:a.DS.stores.SettingsStore.s.keyboardDragSpeed,zoom:a.DS.stores.SettingsStore.s.zoom,key:x,scrollCallback:a.DS.Area.scroll,scrollDiff:a._scrollDiff,canScroll:a.DS.stores.ScrollStore.canScroll,dragKeys:a._dragKeys});a._elements.forEach(function(I){return po({element:I,posDirection:P,containerRect:a.DS.SelectorArea.rect,useTransform:a.DS.stores.SettingsStore.s.useTransform})}),a.DS.publish(["Interaction:update:pre","Interaction:update"],B)}}),i(this,"keyboardEnd",function(s){var p=s.event,w=s.key,x=w.toLowerCase();if(!(!a.DS.stores.SettingsStore.s.keyboardDrag||!a._dragKeysFlat.includes(x)||!a.DS.SelectedSet.size||!a.DS.stores.SettingsStore.s.draggability)){var B={event:p,isDragging:a.DS.stores.SettingsStore.s.draggability,isDraggingKeyboard:!0};a.DS.publish(["Interaction:end:pre","Interaction:end"],B)}}),i(this,"start",function(s){var p=s.isDragging,w=s.isDraggingKeyboard;!p||w||(a._prevCursorPos=null,a._prevScrollPos=null,a._elements=a.DS.getSelection(),a.handleZIndex(!0))}),i(this,"stop",function(s){s!=null&&s.isKeyboard||(a._prevCursorPos=null,a._prevScrollPos=null,a.handleZIndex(!1),a._elements=[])}),i(this,"update",function(s){var p=s.isDragging,w=s.isDraggingKeyboard;if(!(!p||!a._elements.length||w||a.DS.continue)){var x=H(a._cursorDiff,"+",a._scrollDiff);a._elements.forEach(function(B){return po({element:B,posDirection:x,containerRect:a.DS.SelectorArea.rect,useTransform:a.DS.stores.SettingsStore.s.useTransform})})}}),i(this,"handleZIndex",function(s){a._elements.forEach(function(p){return p.style.zIndex="".concat((parseInt(p.style.zIndex)||0)+s?9999:-9998)})}),this.DS=b,this.DS.subscribe("Settings:updated:dragKeys",this.assignDragkeys),this.assignDragkeys(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return l(h,[{key:"_cursorDiff",get:function(){var a=this.DS.stores.PointerStore.currentVal,b=this._prevCursorPos?H(a,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=a,b}},{key:"_scrollDiff",get:function(){var a=this.DS.stores.ScrollStore.currentVal,b=this._prevScrollPos?H(a,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=a,b}}]),h}(),kd=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"isInteracting",void 0),i(this,"isDragging",void 0),i(this,"init",function(){return a.DS.publish("Interaction:init:pre",{})}),i(this,"_init",function(){a.stop(),a.DS.Area.HTMLNode.addEventListener("mousedown",a.start),a.DS.Area.HTMLNode.addEventListener("touchstart",a.start,{passive:!1}),a.DS.publish("Interaction:init",{})}),i(this,"start",function(s){return a.DS.publish("Interaction:start:pre",{event:s,isDragging:a.isDragging})}),i(this,"_start",function(s){s.type==="touchstart"&&s.preventDefault(),a._canInteract(s)&&(a.isInteracting=!0,a.isDragging=a.isDragEvent(s),a.DS.publish("Interaction:start",{event:s,isDragging:a.isDragging}),document.addEventListener("mouseup",a.reset),document.addEventListener("touchend",a.reset))}),i(this,"isDragEvent",function(s){var p=s.target.closest(".".concat(a.DS.stores.SettingsStore.s.selectableClass));return!a.DS.stores.SettingsStore.s.draggability||a.DS.stores.KeyStore.isMultiSelectKeyPressed(s)||!p?!1:(a.DS.stores.SettingsStore.s.immediateDrag&&(a.DS.SelectedSet.size?a.DS.SelectedSet.has(p)||(a.DS.SelectedSet.clear(),a.DS.SelectedSet.add(p)):a.DS.SelectedSet.add(p)),!!a.DS.SelectedSet.has(p))}),i(this,"onClick",function(s){var p=s.event;if(!!a._canInteract(p)&&!(p.detail>0)){var w=a.DS,x=w.stores,B=x.PointerStore,P=x.KeyStore,I=w.SelectableSet,ne=w.SelectedSet;B.start(p);var de=p.target;!I.has(de)||(P.isMultiSelectKeyPressed(p)||ne.clear(),ne.toggle(de),a.reset())}}),i(this,"stop",function(){a.isInteracting=!1,a.isDragging=!1,a.DS.Area.HTMLNode.removeEventListener("mousedown",a.start),a.DS.Area.HTMLNode.removeEventListener("touchstart",a.start,{passive:!1}),document.removeEventListener("mouseup",a.reset),document.removeEventListener("touchend",a.reset)}),i(this,"update",function(s){var p=s.event,w=s.scroll_directions,x=s.scroll_multiplier;a.isInteracting&&a.DS.publish(["Interaction:update:pre","Interaction:update"],{event:p,scroll_directions:w,scroll_multiplier:x,isDragging:a.isDragging})}),i(this,"reset",function(s){return a.DS.publish("Interaction:end:pre",{event:s,isDragging:a.isDragging})}),i(this,"_reset",function(s){var p=a.isDragging;a.stop(),a.init(),a.DS.publish("Interaction:end",{event:s,isDragging:p})}),this.DS=b,this.DS.subscribe("Settings:updated:area",this.init),this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(s){var p=s.event;return a.start(p)}),this.DS.subscribe("Interaction:start:pre",function(s){var p=s.event;return a._start(p)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(s){var p=s.event;return a._reset(p)}),this.DS.subscribe("Area:scroll",this.update)}return l(h,[{key:"_canInteract",value:function(a){var b=a.clientX===0&&a.clientY===0&&a.detail===0&&a.target;return!(a.button===2||this.isInteracting||a.target&&!this.DS.SelectorArea.isInside(a.target)||!b&&!this.DS.SelectorArea.isClicked(a))}}]),h}(),xd=function h(d){var a=this,b=d.DS;o(this,h),i(this,"subscribers",{}),i(this,"subscribe",function(s,p){return Array.isArray(a.subscribers[s])||(a.subscribers[s]=[]),a.subscribers[s].push(p),a.subscribers[s].length-1}),i(this,"unsubscribe",function(s,p,w){w>=0?a.subscribers[s].splice(w,1):p&&(a.subscribers[s]=a.subscribers[s].filter(function(x){return x!==p}))}),i(this,"publish",function(s,p){Array.isArray(s)?s.forEach(function(w){return a._publish(w,p)}):a._publish(s,p)}),i(this,"_publish",function(s,p){var w=a.subscribers[s];!Array.isArray(w)||(s.includes(":pre")?a._handlePrePublish(w,p):a._handlePublish(w,p))}),i(this,"_handlePublish",function(s,p){for(var w=0,x=s.length;w<x;w++){if(a.DS.stopped)return;s[w](p)}}),i(this,"_handlePrePublish",function(s,p){for(var w=s.length;w--;){if(a.DS.stopped)return;s[w](p)}}),this.DS=b},Dd=function(h){y(a,h);var d=A(a);function a(b){var s,p=b.DS;return o(this,a),s=d.call(this),i(k(s),"init",function(){return He(s.DS.stores.SettingsStore.s.selectables).forEach(function(w){return s.add(w)})}),i(k(s),"clear",function(){return s.forEach(function(w){return s.delete(w)})}),i(k(s),"_onClick",function(w){return s.DS.publish(["Selectable:click:pre","Selectable:click"],{event:w})}),i(k(s),"_onPointer",function(w){return s.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:w})}),i(k(s),"addAll",function(w){return w.forEach(function(x){return s.add(x)})}),i(k(s),"deleteAll",function(w){return w.forEach(function(x){return s.delete(x)})}),s.DS=p,s.DS.subscribe("Interaction:init",s.init),s.DS.PubSub.subscribe("Settings:updated:selectables",function(){s.clear(),s.init()}),s.DS.subscribe("Settings:updated:selectableClass",function(w){var x=w.settings;s.forEach(function(B){B.classList.remove(x["selectableClass:pre"]),B.classList.add(x.selectableClass)})}),s}return l(a,[{key:"add",value:function(s){if(!V(m(a.prototype),"has",this).call(this,s)){var p={items:this.elements,item:s};return this.DS.publish("Selectable:added:pre",p),s.classList.add(this.DS.stores.SettingsStore.s.selectableClass),s.addEventListener("click",this._onClick),s.addEventListener("mousedown",this._onPointer),s.addEventListener("touchstart",this._onPointer,{passive:!1}),this.DS.stores.SettingsStore.s.draggability&&!this.DS.stores.SettingsStore.s.useTransform&&mo({computedStyle:window.getComputedStyle(s),node:s}),this.DS.publish("Selectable:added",p),V(m(a.prototype),"add",this).call(this,s)}}},{key:"delete",value:function(s){if(!!V(m(a.prototype),"has",this).call(this,s)){var p={items:this.elements,item:s};return this.DS.publish("Selectable:removed:pre",p),s.classList.remove(this.DS.stores.SettingsStore.s.selectableClass),s.classList.remove(this.DS.stores.SettingsStore.s.hoverClass),s.removeEventListener("click",this._onClick),s.removeEventListener("mousedown",this._onPointer),s.removeEventListener("touchstart",this._onPointer,{passive:!1}),this.DS.publish("Selectable:removed",p),V(m(a.prototype),"delete",this).call(this,s)}}},{key:"elements",get:function(){return Array.from(this.values())}}]),a}(_(Set)),Ed=function(h){y(a,h);var d=A(a);function a(b){var s,p=b.DS;return o(this,a),s=d.call(this),i(k(s),"clear",function(){return s.forEach(function(w){return s.delete(w)})}),i(k(s),"addAll",function(w){return w.forEach(function(x){return s.add(x)})}),i(k(s),"deleteAll",function(w){return w.forEach(function(x){return s.delete(x)})}),s.DS=p,s}return l(a,[{key:"add",value:function(s){if(!V(m(a.prototype),"has",this).call(this,s)){var p={items:this.elements,item:s};return this.DS.publish("Selected:added:pre",p),V(m(a.prototype),"add",this).call(this,s),s.classList.add(this.DS.stores.SettingsStore.s.selectedClass),s.style.zIndex="".concat((parseInt(s.style.zIndex)||0)+1),this.DS.publish("Selected:added",p),this}}},{key:"delete",value:function(s){if(!!V(m(a.prototype),"has",this).call(this,s)){var p={items:this.elements,item:s};this.DS.publish("Selected:removed:pre",p);var w=V(m(a.prototype),"delete",this).call(this,s);return s.classList.remove(this.DS.stores.SettingsStore.s.selectedClass),s.style.zIndex="".concat((parseInt(s.style.zIndex)||0)-1),this.DS.publish("Selected:removed",p),w}}},{key:"toggle",value:function(s){return this.has(s)?this.delete(s):this.add(s),s}},{key:"elements",get:function(){return Array.from(this.values())}}]),a}(_(Set)),Nd=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_prevSelectedSet",void 0),i(this,"start",function(s){var p=s.event,w=s.isDragging;w||(a._storePrevious(p),a._handleInsideSelection(!0,p))}),i(this,"update",function(s){var p=s.isDragging;p||a.DS.continue||a._handleInsideSelection()}),i(this,"_handleInsideSelection",function(s,p){for(var w=a.DS,x=w.SelectableSet,B=w.SelectorArea,P=w.Selector,I=x.elements.map(function(xe){return[xe,xe.getBoundingClientRect()]}),ne=[],de=[],Q=0,$e=I.length;Q<$e;Q++)!B.isInside(I[Q][0],I[Q][1])||(Xt(I[Q][1],P.rect)?ne.push(I[Q][0]):de.push(I[Q][0]));var G=a.DS.stores.KeyStore.isMultiSelectKeyPressed(p)&&a.DS.stores.SettingsStore.s.multiSelectToggling;a.DS.continue||(ne.forEach(function(xe){return pd({element:xe,force:s,multiSelectionToggle:G,SelectedSet:a.DS.SelectedSet,hoverClassName:a.DS.stores.SettingsStore.s.hoverClass})}),de.forEach(function(xe){return gd({element:xe,force:s,SelectedSet:a.DS.SelectedSet,hoverClassName:a.DS.stores.SettingsStore.s.hoverClass,PrevSelectedSet:a._prevSelectedSet})}))}),this.DS=b,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return l(h,[{key:"_storePrevious",value:function(a){var b=this.DS,s=b.stores.KeyStore,p=b.SelectedSet;s.isMultiSelectKeyPressed(a)?this._prevSelectedSet=new Set(p):this._prevSelectedSet=new Set}}]),h}(),Vd=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_rect",void 0),i(this,"attachSelector",function(){var s,p;a.HTMLNode&&(s=a.DS.SelectorArea)!==null&&s!==void 0&&s.HTMLNode&&a.DS.SelectorArea.HTMLNode.removeChild(a.HTMLNode),a.HTMLNode=a.DS.stores.SettingsStore.s.selector||ce(a.DS.stores.SettingsStore.s.customStyles),a.HTMLNode.classList.add(a.DS.stores.SettingsStore.s.selectorClass),a.HTMLNode&&(p=a.DS.SelectorArea)!==null&&p!==void 0&&p.HTMLNode&&a.DS.SelectorArea.HTMLNode.appendChild(a.HTMLNode)}),i(this,"start",function(s){var p=s.isDragging;if(!p){var w=a.DS.stores.PointerStore,x=w.initialValArea;go(a.HTMLNode,T(x,1)),a.HTMLNode.style.display="block",a._rect=null}}),i(this,"stop",function(){a.HTMLNode.style.width="0",a.HTMLNode.style.height="0",a.HTMLNode.style.display="none"}),i(this,"update",function(s){var p=s.isDragging;if(!(p||a.DS.continue)){var w=a.DS.stores,x=w.ScrollStore,B=w.PointerStore,P=cd({scrollAmount:x.scrollAmount,initialPointerPos:B.initialValArea,pointerPos:B.currentValArea});go(a.HTMLNode,P),a._rect=null}}),this.DS=b,this.DS.subscribe("Settings:updated:selectorClass",function(s){var p=s.settings;a.HTMLNode.classList.remove(p["selectorClass:pre"]),a.HTMLNode.classList.add(p.selectorClass)}),this.DS.subscribe("Settings:updated:selector",this.attachSelector),this.attachSelector(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return l(h,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),h}(),Cd=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_scrollInterval",void 0),i(this,"_rect",void 0),i(this,"currentEdges",[]),i(this,"start",function(){return a.applyElements("append")}),i(this,"applyElements",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"append",p=document.body?"body":"documentElement",w="".concat(s,"Child");a.HTMLNode[w](a.DS.Selector.HTMLNode),document[p][w](a.HTMLNode)}),i(this,"updatePos",function(){a._rect=null;var s=a.DS.Area.rect,p=a.DS.Area.computedBorder,w=a.HTMLNode.style,x="".concat(s.top+p.top,"px"),B="".concat(s.left+p.left,"px"),P="".concat(s.width,"px"),I="".concat(s.height,"px");w.top!==x&&(w.top=x),w.left!==B&&(w.left=B),w.width!==P&&(w.width=P),w.height!==I&&(w.height=I)}),i(this,"stop",function(s){a.stopAutoScroll(),s&&a.applyElements("remove")}),i(this,"startAutoScroll",function(){a.currentEdges=[],a._scrollInterval=setInterval(function(){return a.handleAutoScroll()},16)}),i(this,"handleAutoScroll",function(){if(!a.DS.continue){var s=a.DS,p=s.stores.PointerStore,w=s.Area;a.currentEdges=uo({elementRect:T(p.currentVal),containerRect:a.rect,tolerance:a.DS.stores.SettingsStore.s.overflowTolerance}),a.currentEdges.length&&w.scroll(a.currentEdges,a.DS.stores.SettingsStore.s.autoScrollSpeed)}}),i(this,"stopAutoScroll",function(){a.currentEdges=[],clearInterval(a._scrollInterval)}),i(this,"isInside",function(s,p){return a.DS.Area.HTMLNode.contains(s)&&a.DS.stores.ScrollStore.canScroll?!0:Xt(a.rect,p||s.getBoundingClientRect())}),this.DS=b,this.HTMLNode=K(),this.DS.subscribe("Settings:updated:selectorAreaClass",function(s){var p=s.settings;a.HTMLNode.classList.remove(p["selectorAreaClass:pre"]),a.HTMLNode.classList.add(p.selectorAreaClass)}),this.HTMLNode.classList.add(this.DS.stores.SettingsStore.s.selectorAreaClass),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){a.updatePos(),a.stopAutoScroll()})}return l(h,[{key:"isClicked",value:function(a){var b=this.DS.stores.PointerStore,s=a?b.getPointerPosition(a):b.initialVal;return Xt({left:s.x,top:s.y,right:s.x,bottom:s.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),h}(),Md=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_currentValues",new Set),i(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),i(this,"init",function(){document.addEventListener("keydown",a.keydown),document.addEventListener("keyup",a.keyup),window.addEventListener("blur",a.reset)}),i(this,"keydown",function(s){var p=s.key.toLowerCase();a.DS.publish("KeyStore:down:pre",{event:s,key:p}),a._currentValues.add(p),a.DS.publish("KeyStore:down",{event:s,key:p})}),i(this,"keyup",function(s){var p=s.key.toLowerCase();a.DS.publish("KeyStore:up:pre",{event:s,key:p}),a._currentValues.delete(p),a.DS.publish("KeyStore:up",{event:s,key:p})}),i(this,"stop",function(){document.removeEventListener("keydown",a.keydown),document.removeEventListener("keyup",a.reset),window.removeEventListener("blur",a.reset),a.reset()}),i(this,"reset",function(){return a._currentValues.clear()}),this.DS=b,this.DS.subscribe("Interaction:init",this.init)}return l(h,[{key:"isMultiSelectKeyPressed",value:function(a){var b=this;if(this.DS.stores.SettingsStore.s.multiSelectMode)return!0;var s=this.DS.stores.SettingsStore.s.multiSelectKeys.map(function(p){return p.toLocaleLowerCase()});return!!(this.currentValues.some(function(p){return s.includes(p.toLocaleLowerCase())})||a&&s.some(function(p){return a[b._keyMapping[p]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),h}(),$d=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_isMouseInteraction",!1),i(this,"_initialValArea",void 0),i(this,"_currentValArea",void 0),i(this,"_lastValArea",void 0),i(this,"_initialVal",void 0),i(this,"_currentVal",void 0),i(this,"_lastVal",void 0),i(this,"_lastTouch",void 0),i(this,"init",function(){document.addEventListener("mousemove",a.update),document.addEventListener("touchmove",a.update,{passive:!1})}),i(this,"getPointerPosition",function(s){return ld({event:a._normalizedEvent(s)})}),i(this,"update",function(s){!s||(a.DS.publish("PointerStore:updated:pre",{event:s}),a.currentVal=a.getPointerPosition(s),a._isMouseInteraction&&a.DS.publish("PointerStore:updated",{event:s}))}),i(this,"stop",function(){document.removeEventListener("mousemove",a.update),document.removeEventListener("touchmove",a.update,{passive:!1}),setTimeout(function(){return a._isMouseInteraction=!1},100)}),i(this,"reset",function(s){!s||(a.currentVal=a.lastVal=a.getPointerPosition(s),a.stop(),a.init())}),this.DS=b,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(s){var p=s.event;return a.start(p)}),this.DS.subscribe("Interaction:end",function(s){var p=s.event;return a.reset(p)})}return l(h,[{key:"start",value:function(a){!a||(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(a))}},{key:"_normalizedEvent",value:function(a){return"touches"in a&&a.type!=="touchend"&&(this._lastTouch=a),"touches"in a?this._lastTouch.touches[0]:a}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(a){this._initialVal=a,this._initialValArea=a&&H(a,"-",H(N(this.DS.Area.rect),"+",N(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(a){this._currentVal=a,this._currentValArea=a&&H(a,"-",H(N(this.DS.Area.rect),"+",N(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(a){this._lastVal=a,this._lastValArea=a&&H(a,"-",H(N(this.DS.Area.rect),"+",N(this.DS.Area.computedBorder)))}}]),h}(),Bd=function(){function h(d){var a=this,b=d.DS;o(this,h),i(this,"_initialVal",void 0),i(this,"_currentVal",void 0),i(this,"_canScroll",void 0),i(this,"init",function(){return a.DS.stores.SettingsStore.s.area.addEventListener("scroll",a.update)}),i(this,"start",function(){a._currentVal=a._initialVal=ze(a.DS.stores.SettingsStore.s.area),a.DS.stores.SettingsStore.s.area.addEventListener("scroll",a.update)}),i(this,"update",function(){return a._currentVal=ze(a.DS.stores.SettingsStore.s.area)}),i(this,"stop",function(){a.DS.stores.SettingsStore.s.area.removeEventListener("scroll",a.update),a._initialVal={x:0,y:0},a._canScroll=null}),i(this,"reset",function(){a.stop(),a.start()}),this.DS=b,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return a.start()}),this.DS.subscribe("Interaction:end",function(){return a.reset()})}return l(h,[{key:"canScroll",get:function(){return typeof this._canScroll=="boolean"?this._canScroll:this._canScroll=z(this.DS.stores.SettingsStore.s.area)}},{key:"scrollAmount",get:function(){var a=H(this.currentVal,"-",this.initialVal),b=$(this.DS.stores.SettingsStore.s.zoom),s=H(H(a,"*",b),"-",a);return{x:a.x+s.x,y:a.y+s.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=ze(this.DS.stores.SettingsStore.s.area)),this._currentVal}}]),h}(),Td=function h(d){var a=this,b=d.DS,s=d.settings;o(this,h),i(this,"_settings",{}),i(this,"s",{}),i(this,"update",function(p){var w=p.settings,x=p.init;return a.DS.publish("Settings:updated:pre",u({settings:w},x?{init:x}:{}))}),i(this,"_update",function(p){for(var w=p.settings,x=p.init,B=yd(w,x),P=function(){var Q,$e=L(ne[I],2),G=$e[0],xe=$e[1];G in a._settings||Object.defineProperty(a.s,G,{get:function(){return a._settings[G]},set:function(Od){return a.update({settings:i({},G,Od)})}}),a._settings["".concat(G,":pre")]=a._settings[G],a._settings[G]=xe;var yo={settings:(Q={},i(Q,G,a._settings[G]),i(Q,"".concat(G,":pre"),a._settings["".concat(G,":pre")]),Q)};a.DS.publish("Settings:updated",yo),a.DS.publish("Settings:updated:".concat(G),yo)},I=0,ne=Object.entries(B);I<ne.length;I++)P()}),this.DS=b,this.DS.subscribe("Settings:updated:pre",this._update),this.update({settings:s,init:!0})},Ad=function(){function h(d){var a=this;o(this,h),i(this,"continue",!1),i(this,"start",function(){a.stopped=!1,a.Interaction.init()}),i(this,"break",function(){return a.continue=!0}),i(this,"getSelection",function(){return a.SelectedSet.elements}),i(this,"getSelectables",function(){return a.SelectableSet.elements}),i(this,"getInitialCursorPosition",function(){return a.stores.PointerStore.initialVal}),i(this,"getCurrentCursorPosition",function(){return a.stores.PointerStore.currentVal}),i(this,"getPreviousCursorPosition",function(){return a.stores.PointerStore.lastVal}),i(this,"getInitialCursorPositionArea",function(){return a.stores.PointerStore.initialValArea}),i(this,"getCurrentCursorPositionArea",function(){return a.stores.PointerStore.currentValArea}),i(this,"getPreviousCursorPositionArea",function(){return a.stores.PointerStore.lastValArea}),i(this,"isMultiSelect",function(b){return a.stores.KeyStore.isMultiSelectKeyPressed(b)}),i(this,"isDragging",function(){return a.Interaction.isDragging}),i(this,"setSettings",function(b){return a.stores.SettingsStore.update({settings:b})}),this.PubSub=new xd({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this.stores={},this.stores.SettingsStore=new Td({DS:this,settings:d}),this.stores.PointerStore=new $d({DS:this}),this.stores.ScrollStore=new Bd({DS:this}),this.stores.KeyStore=new Md({DS:this}),this.Area=new Sd({DS:this}),this.Selector=new Vd({DS:this}),this.SelectorArea=new Cd({DS:this}),this.SelectableSet=new Dd({DS:this}),this.SelectedSet=new Ed({DS:this}),this.Selection=new Nd({DS:this}),this.Drag=new _d({DS:this}),this.Interaction=new kd({DS:this}),wd({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction}),this.subscribe("Interaction:end",function(){return a.continue=!1}),this.start()}return l(h,[{key:"stop",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;s&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(a),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),a&&this.SelectableSet.clear(),b&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.addAll(He(a)),s||this.addSelectables(a),b&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.deleteAll(He(a)),s&&this.removeSelectables(a),b&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(a){var b=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return He(a).forEach(function(w){return b.SelectedSet.has(w)?b.removeSelection(a,s,p):b.addSelection(a,s,p)}),s&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.clearSelection(),this.addSelection(a,b,s),this.getSelection()}},{key:"clearSelection",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.SelectedSet.clear(),a&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(a,b,s){var p=He(a);return this.SelectableSet.addAll(p),b&&this.SelectedSet.addAll(p),s&&this.PubSub.publish("callback",{items:this.getSelection()}),a}},{key:"setSelectables",value:function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return console.warn('[DragSelect] DEPRECATION ".setSelectables" is deprecated and will be removed soon. Please use "ds.setSettings({ selectables: << new dom elements >> })" instead (see docs)'),this.removeSelectables(a,b),this.addSelectables(a,s)}},{key:"removeSelectables",value:function(a,b,s){return this.SelectableSet.deleteAll(He(a)),b&&this.removeSelection(a),s&&this.PubSub.publish("callback",{items:this.getSelection()}),a}}]),h}();return Ad})})(Gt);const qo=Gt.exports,Jt=(r,t,o,n,l)=>(t=Math,o=t.log,n=1024,l=o(r)/o(n)|0,r/t.pow(n,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B"),Zt=(r,t=null)=>{var o;return new Date(r*1e3).toLocaleString((o=t!=null?t:navigator.language)!=null?o:"en-US")},Go={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Jo=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)],Zo={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Qo=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)],nt=Object.assign({name:"VFSortIcon"},{props:{direction:String},setup(r){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[r.direction=="down"?(e.openBlock(),e.createElementBlock("svg",Go,Jo)):e.createCommentVNode("",!0),r.direction=="up"?(e.openBlock(),e.createElementBlock("svg",Zo,Qo)):e.createCommentVNode("",!0)]))}}),en=["onClick"],tn=Object.assign({name:"VFToast.vue"},{setup(r){const t=e.inject("emitter"),{getStore:o}=e.inject("storage"),n=e.ref(o("full-screen",!1)),l=y=>y=="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",i=e.ref([]),c=y=>{i.value.splice(y,1)},u=y=>{let m=i.value.findIndex(f=>f.id===y);m!==-1&&c(m)};return t.on("vf-toast-clear",()=>{i.value=[]}),t.on("vf-toast-push",y=>{let m=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");y.id=m,i.value.push(y),setTimeout(()=>{u(m)},5e3)}),(y,m)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([n.value.value?"fixed":"absolute","bottom-0 max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(f,g)=>(e.openBlock(),e.createElementBlock("div",{onClick:v=>c(g),key:f,class:e.normalizeClass([l(f.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},e.toDisplayString(f.label),11,en))),128))]),_:1})],2))}}),De=r=>Object.entries(r).map(t=>t.map(encodeURIComponent).join("=")).join("&"),{apiUrl:rn}=he(),Qt=(r,t,o)=>rn.value+"?"+De({q:"preview",adapter:r,path:t,token:o}),be=typeof window<"u",er=be&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),tr=be&&"IntersectionObserver"in window,rr=be&&"classList"in document.createElement("p"),or=be&&window.devicePixelRatio>1,on={elements_selector:".lazy",container:er||be?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},nr=r=>Object.assign({},on,r),ar=function(r,t){let o;const n="LazyLoad::Initialized",l=new r(t);try{o=new CustomEvent(n,{detail:{instance:l}})}catch{o=document.createEvent("CustomEvent"),o.initCustomEvent(n,!1,!1,{instance:l})}window.dispatchEvent(o)},nn=(r,t)=>{if(!!t)if(!t.length)ar(r,t);else for(let o=0,n;n=t[o];o+=1)ar(r,n)},ye="src",bt="srcset",vt="sizes",ir="poster",Fe="llOriginalAttrs",sr="data",wt="loading",lr="loaded",cr="applied",an="entered",St="error",dr="native",hr="data-",ur="ll-status",ee=(r,t)=>r.getAttribute(hr+t),sn=(r,t,o)=>{var n=hr+t;if(o===null){r.removeAttribute(n);return}r.setAttribute(n,o)},Ue=r=>ee(r,ur),Ee=(r,t)=>sn(r,ur,t),at=r=>Ee(r,null),_t=r=>Ue(r)===null,ln=r=>Ue(r)===wt,cn=r=>Ue(r)===St,kt=r=>Ue(r)===dr,dn=[wt,lr,cr,St],hn=r=>dn.indexOf(Ue(r))>=0,ve=(r,t,o,n)=>{if(!!r){if(n!==void 0){r(t,o,n);return}if(o!==void 0){r(t,o);return}r(t)}},Be=(r,t)=>{if(rr){r.classList.add(t);return}r.className+=(r.className?" ":"")+t},ue=(r,t)=>{if(rr){r.classList.remove(t);return}r.className=r.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},un=r=>{r.llTempImage=document.createElement("IMG")},fn=r=>{delete r.llTempImage},fr=r=>r.llTempImage,it=(r,t)=>{if(!t)return;const o=t._observer;!o||o.unobserve(r)},mn=r=>{r.disconnect()},pn=(r,t,o)=>{t.unobserve_entered&&it(r,o)},xt=(r,t)=>{!r||(r.loadingCount+=t)},gn=r=>{!r||(r.toLoadCount-=1)},mr=(r,t)=>{!r||(r.toLoadCount=t)},yn=r=>r.loadingCount>0,bn=r=>r.toLoadCount>0,pr=r=>{let t=[];for(let o=0,n;n=r.children[o];o+=1)n.tagName==="SOURCE"&&t.push(n);return t},Dt=(r,t)=>{const o=r.parentNode;if(!o||o.tagName!=="PICTURE")return;pr(o).forEach(t)},gr=(r,t)=>{pr(r).forEach(t)},st=[ye],yr=[ye,ir],Ke=[ye,bt,vt],br=[sr],lt=r=>!!r[Fe],vr=r=>r[Fe],wr=r=>delete r[Fe],Te=(r,t)=>{if(lt(r))return;const o={};t.forEach(n=>{o[n]=r.getAttribute(n)}),r[Fe]=o},vn=r=>{lt(r)||(r[Fe]={backgroundImage:r.style.backgroundImage})},wn=(r,t,o)=>{if(!o){r.removeAttribute(t);return}r.setAttribute(t,o)},Ne=(r,t)=>{if(!lt(r))return;const o=vr(r);t.forEach(n=>{wn(r,n,o[n])})},Sn=r=>{if(!lt(r))return;const t=vr(r);r.style.backgroundImage=t.backgroundImage},Sr=(r,t,o)=>{Be(r,t.class_applied),Ee(r,cr),o&&(t.unobserve_completed&&it(r,t),ve(t.callback_applied,r,o))},_r=(r,t,o)=>{Be(r,t.class_loading),Ee(r,wt),o&&(xt(o,1),ve(t.callback_loading,r,o))},we=(r,t,o)=>{!o||r.setAttribute(t,o)},kr=(r,t)=>{we(r,vt,ee(r,t.data_sizes)),we(r,bt,ee(r,t.data_srcset)),we(r,ye,ee(r,t.data_src))},_n=(r,t)=>{Dt(r,o=>{Te(o,Ke),kr(o,t)}),Te(r,Ke),kr(r,t)},kn=(r,t)=>{Te(r,st),we(r,ye,ee(r,t.data_src))},xn=(r,t)=>{gr(r,o=>{Te(o,st),we(o,ye,ee(o,t.data_src))}),Te(r,yr),we(r,ir,ee(r,t.data_poster)),we(r,ye,ee(r,t.data_src)),r.load()},Dn=(r,t)=>{Te(r,br),we(r,sr,ee(r,t.data_src))},En=(r,t,o)=>{const n=ee(r,t.data_bg),l=ee(r,t.data_bg_hidpi),i=or&&l?l:n;!i||(r.style.backgroundImage=`url("${i}")`,fr(r).setAttribute(ye,i),_r(r,t,o))},Nn=(r,t,o)=>{const n=ee(r,t.data_bg_multi),l=ee(r,t.data_bg_multi_hidpi),i=or&&l?l:n;!i||(r.style.backgroundImage=i,Sr(r,t,o))},Vn=(r,t,o)=>{const n=ee(r,t.data_bg_set);if(!n)return;const l=n.split("|");let i=l.map(c=>`image-set(${c})`);r.style.backgroundImage=i.join(),r.style.backgroundImage===""&&(i=l.map(c=>`-webkit-image-set(${c})`),r.style.backgroundImage=i.join()),Sr(r,t,o)},xr={IMG:_n,IFRAME:kn,VIDEO:xn,OBJECT:Dn},Cn=(r,t)=>{const o=xr[r.tagName];!o||o(r,t)},Mn=(r,t,o)=>{const n=xr[r.tagName];!n||(n(r,t),_r(r,t,o))},$n=["IMG","IFRAME","VIDEO","OBJECT"],Bn=r=>$n.indexOf(r.tagName)>-1,Dr=(r,t)=>{t&&!yn(t)&&!bn(t)&&ve(r.callback_finish,t)},Er=(r,t,o)=>{r.addEventListener(t,o),r.llEvLisnrs[t]=o},Tn=(r,t,o)=>{r.removeEventListener(t,o)},Et=r=>!!r.llEvLisnrs,An=(r,t,o)=>{Et(r)||(r.llEvLisnrs={});const n=r.tagName==="VIDEO"?"loadeddata":"load";Er(r,n,t),Er(r,"error",o)},Nt=r=>{if(!Et(r))return;const t=r.llEvLisnrs;for(let o in t){const n=t[o];Tn(r,o,n)}delete r.llEvLisnrs},Nr=(r,t,o)=>{fn(r),xt(o,-1),gn(o),ue(r,t.class_loading),t.unobserve_completed&&it(r,o)},Ln=(r,t,o,n)=>{const l=kt(t);Nr(t,o,n),Be(t,o.class_loaded),Ee(t,lr),ve(o.callback_loaded,t,n),l||Dr(o,n)},On=(r,t,o,n)=>{const l=kt(t);Nr(t,o,n),Be(t,o.class_error),Ee(t,St),ve(o.callback_error,t,n),o.restore_on_error&&Ne(t,Ke),l||Dr(o,n)},Vt=(r,t,o)=>{const n=fr(r)||r;if(Et(n))return;An(n,c=>{Ln(c,r,t,o),Nt(n)},c=>{On(c,r,t,o),Nt(n)})},jn=(r,t,o)=>{un(r),Vt(r,t,o),vn(r),En(r,t,o),Nn(r,t,o),Vn(r,t,o)},In=(r,t,o)=>{Vt(r,t,o),Mn(r,t,o)},Ct=(r,t,o)=>{Bn(r)?In(r,t,o):jn(r,t,o)},Pn=(r,t,o)=>{r.setAttribute("loading","lazy"),Vt(r,t,o),Cn(r,t),Ee(r,dr)},Vr=r=>{r.removeAttribute(ye),r.removeAttribute(bt),r.removeAttribute(vt)},zn=r=>{Dt(r,t=>{Vr(t)}),Vr(r)},Cr=r=>{Dt(r,t=>{Ne(t,Ke)}),Ne(r,Ke)},Hn={IMG:Cr,IFRAME:r=>{Ne(r,st)},VIDEO:r=>{gr(r,t=>{Ne(t,st)}),Ne(r,yr),r.load()},OBJECT:r=>{Ne(r,br)}},Rn=r=>{const t=Hn[r.tagName];if(!t){Sn(r);return}t(r)},Fn=(r,t)=>{_t(r)||kt(r)||(ue(r,t.class_entered),ue(r,t.class_exited),ue(r,t.class_applied),ue(r,t.class_loading),ue(r,t.class_loaded),ue(r,t.class_error))},Un=(r,t)=>{Rn(r),Fn(r,t),at(r),wr(r)},Kn=(r,t,o,n)=>{!o.cancel_on_exit||!ln(r)||r.tagName==="IMG"&&(Nt(r),zn(r),Cr(r),ue(r,o.class_loading),xt(n,-1),at(r),ve(o.callback_cancel,r,t,n))},Yn=(r,t,o,n)=>{const l=hn(r);Ee(r,an),Be(r,o.class_entered),ue(r,o.class_exited),pn(r,o,n),ve(o.callback_enter,r,t,n),!l&&Ct(r,o,n)},Wn=(r,t,o,n)=>{_t(r)||(Be(r,o.class_exited),Kn(r,t,o,n),ve(o.callback_exit,r,t,n))},Xn=["IMG","IFRAME","VIDEO"],Mr=r=>r.use_native&&"loading"in HTMLImageElement.prototype,qn=(r,t,o)=>{r.forEach(n=>{Xn.indexOf(n.tagName)!==-1&&Pn(n,t,o)}),mr(o,0)},Gn=r=>r.isIntersecting||r.intersectionRatio>0,Jn=r=>({root:r.container===document?null:r.container,rootMargin:r.thresholds||r.threshold+"px"}),Zn=(r,t,o)=>{r.forEach(n=>Gn(n)?Yn(n.target,n,t,o):Wn(n.target,n,t,o))},Qn=(r,t)=>{t.forEach(o=>{r.observe(o)})},ea=(r,t)=>{mn(r),Qn(r,t)},ta=(r,t)=>{!tr||Mr(r)||(t._observer=new IntersectionObserver(o=>{Zn(o,r,t)},Jn(r)))},$r=r=>Array.prototype.slice.call(r),ct=r=>r.container.querySelectorAll(r.elements_selector),ra=r=>$r(r).filter(_t),oa=r=>cn(r),na=r=>$r(r).filter(oa),Br=(r,t)=>ra(r||ct(t)),aa=(r,t)=>{na(ct(r)).forEach(n=>{ue(n,r.class_error),at(n)}),t.update()},ia=(r,t)=>{!be||(t._onlineHandler=()=>{aa(r,t)},window.addEventListener("online",t._onlineHandler))},sa=r=>{!be||window.removeEventListener("online",r._onlineHandler)},Ye=function(r,t){const o=nr(r);this._settings=o,this.loadingCount=0,ta(o,this),ia(o,this),this.update(t)};Ye.prototype={update:function(r){const t=this._settings,o=Br(r,t);if(mr(this,o.length),er||!tr){this.loadAll(o);return}if(Mr(t)){qn(o,t,this);return}ea(this._observer,o)},destroy:function(){this._observer&&this._observer.disconnect(),sa(this),ct(this._settings).forEach(r=>{wr(r)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(r){const t=this._settings;Br(r,t).forEach(n=>{it(n,this),Ct(n,t,this)})},restoreAll:function(){const r=this._settings;ct(r).forEach(t=>{Un(t,r)})}},Ye.load=(r,t)=>{const o=nr(t);Ct(r,o)},Ye.resetStatus=r=>{at(r)},be&&nn(Ye,window.lazyLoadOptions);const la={class:"relative flex-auto overflow-hidden"},ca={key:0,class:"grid grid-cols-12 border-b border-neutral-300 border-gray-200 dark:border-gray-700 text-xs select-none"},da=["onDblclick","onContextmenu","data-type","data-item","data-index"],ha={class:"grid grid-cols-12 items-center"},ua={class:"flex col-span-7 items-center"},fa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ma=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],pa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ga=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],ya={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},ba={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},va=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],wa={class:"grid grid-cols-12 items-center"},Sa={class:"flex col-span-7 items-center"},_a={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ka=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],xa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Da=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ea={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Na={class:"col-span-2 text-center"},Va={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},Ca=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Ma={class:"relative"},$a={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ba=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Ta={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Aa=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],La={key:2,class:"absolute block top-1/2 w-full text-center text-neutral-500"},Oa={class:"break-all"},ja=Object.assign({name:"VFExplorer"},{props:{view:String,data:Object,search:Object},setup(r){const t=r;e.inject("accessToken");const o=e.inject("emitter"),{setStore:n,getStore:l}=e.inject("storage"),i=e.inject("adapter"),c=N=>N==null?void 0:N.substring(0,3),u=N=>N.replace(/((?=([\w\W]{0,14}))([\w\W]{8,})([\w\W]{8,}))/,"$2..$4"),y=e.ref(null),m=e.ref(null),f=e.ref(0),g=e.ref(null),{t:v}=e.inject("i18n"),D=Math.floor(Math.random()*2**32),_=e.ref(l("full-screen",!1)),k=new Ye;o.on("vf-fullscreen-toggle",()=>{y.value.style.height=null,_.value=!_.value,n("full-screen",_.value)});const E=e.ref("");o.on("vf-search-query",({newQuery:N})=>{E.value=N,N?o.emit("vf-fetch",{params:{q:"search",adapter:t.data.adapter,path:t.data.dirname,filter:N},onSuccess:T=>{T.files.length||o.emit("vf-toast-push",{label:v("No search result found.")})}}):o.emit("vf-fetch",{params:{q:"index",adapter:t.data.adapter,path:t.data.dirname}})});let A=null;const C=()=>{A&&clearTimeout(A)},V=e.ref(!0),L=N=>{N.touches.length>1&&(V.value?(g.value.stop(),o.emit("vf-toast-push",{label:v("Drag&Drop: off")})):(g.value.start(),o.emit("vf-toast-push",{label:v("Drag&Drop: on")}),o.emit("vf-explorer-update")),V.value=!V.value)},j=N=>{A=setTimeout(()=>{const T=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:N.target.getBoundingClientRect().x,clientY:N.target.getBoundingClientRect().y});N.target.dispatchEvent(T)},500)},S=N=>{N.type=="dir"?(o.emit("vf-search-exit"),o.emit("vf-fetch",{params:{q:"index",adapter:t.data.adapter,path:N.path}})):o.emit("vf-modal-show",{type:"preview",adapter:t.data.adapter,item:N})},M=e.reactive({active:!1,column:"",order:""}),R=(N=!0)=>{let T=[...t.data.files],$=M.column,Z=M.order=="asc"?1:-1;if(!N)return T;const z=(K,ce)=>typeof K=="string"&&typeof ce=="string"?K.toLowerCase().localeCompare(ce.toLowerCase()):K<ce?-1:K>ce?1:0;return M.active&&(T=T.slice().sort((K,ce)=>z(K[$],ce[$])*Z)),T},X=N=>{M.active&&M.column==N?(M.active=M.order=="asc",M.column=N,M.order="desc"):(M.active=!0,M.column=N,M.order="asc")},q=()=>g.value.getSelection().map(N=>JSON.parse(N.dataset.item)),oe=(N,T)=>{if(N.altKey||N.ctrlKey||N.metaKey)return N.preventDefault(),!1;N.dataTransfer.setDragImage(m.value,0,15),N.dataTransfer.effectAllowed="all",N.dataTransfer.dropEffect="copy",N.dataTransfer.setData("items",JSON.stringify(q()))},se=(N,T)=>{N.preventDefault();let $=JSON.parse(N.dataTransfer.getData("items"));if($.find(Z=>Z.storage!=i.value)){alert("Moving items between different storages is not supported yet.");return}o.emit("vf-modal-show",{type:"move",items:{from:$,to:T}})},ae=(N,T)=>{N.preventDefault(),!T||T.type!=="dir"||g.value.getSelection().find($=>$==N.currentTarget)?(N.dataTransfer.dropEffect="none",N.dataTransfer.effectAllowed="none"):N.dataTransfer.dropEffect="copy"},H=()=>{g.value=new qo({area:y.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),o.on("vf-explorer-update",()=>e.nextTick(()=>{g.value.clearSelection(),g.value.setSelectables(document.getElementsByClassName("vf-item-"+D))})),g.value.subscribe("predragstart",({event:N,isDragging:T})=>{if(T)f.value=g.value.getSelection().length,g.value.break();else{const $=N.target.offsetWidth-N.offsetX,Z=N.target.offsetHeight-N.offsetY;$<15&&Z<15&&(g.value.clearSelection(),g.value.break())}}),g.value.subscribe("predragmove",({isDragging:N})=>{N&&g.value.break()}),g.value.subscribe("callback",({items:N,event:T,isDragging:$})=>{o.emit("vf-nodes-selected",q()),f.value=g.value.getSelection().length})};return e.onMounted(H),e.onUpdated(()=>{g.value.Area.reset(),g.value.SelectorArea.updatePos(),k.update()}),e.onMounted(()=>{e.watch(()=>t.view,()=>o.emit("vf-explorer-update"))}),(N,T)=>(e.openBlock(),e.createElementBlock("div",la,[r.view=="list"||E.value.length?(e.openBlock(),e.createElementBlock("div",ca,[e.createElementVNode("div",{onClick:T[0]||(T[0]=$=>X("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center pl-1"},[e.createTextVNode(e.toDisplayString(e.unref(v)("Name"))+" ",1),e.withDirectives(e.createVNode(nt,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="basename"]])]),E.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:T[1]||(T[1]=$=>X("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l border-r dark:border-gray-700"},[e.createTextVNode(e.toDisplayString(e.unref(v)("Size"))+" ",1),e.withDirectives(e.createVNode(nt,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="file_size"]])])),E.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:T[2]||(T[2]=$=>X("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center"},[e.createTextVNode(e.toDisplayString(e.unref(v)("Date"))+" ",1),e.withDirectives(e.createVNode(nt,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="last_modified"]])])),E.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:T[3]||(T[3]=$=>X("path")),class:"col-span-5 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l dark:border-gray-700"},[e.createTextVNode(e.toDisplayString(e.unref(v)("Filepath"))+" ",1),e.withDirectives(e.createVNode(nt,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",{onTouchstart:L,onContextmenu:T[10]||(T[10]=e.withModifiers($=>e.unref(o).emit("vf-contextmenu-show",{event:$,area:y.value,items:q()}),["self","prevent"])),class:e.normalizeClass([_.value?"":"resize-y","h-full w-full text-xs vf-selector-area min-h-[150px] overflow-auto p-1 z-0"]),ref_key:"selectorArea",ref:y},[E.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(R(),($,Z)=>(e.openBlock(),e.createElementBlock("div",{onDblclick:z=>S($),onTouchstart:T[4]||(T[4]=z=>j(z)),onTouchend:T[5]||(T[5]=z=>C()),onContextmenu:e.withModifiers(z=>e.unref(o).emit("vf-contextmenu-show",{event:z,area:y.value,items:q(),target:$}),["prevent"]),class:e.normalizeClass(["vf-item-"+e.unref(D),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":$.type,"data-item":JSON.stringify($),"data-index":Z},[e.createElementVNode("div",ha,[e.createElementVNode("div",ua,[$.type=="dir"?(e.openBlock(),e.createElementBlock("svg",fa,ma)):(e.openBlock(),e.createElementBlock("svg",pa,ga)),e.createElementVNode("span",ya,e.toDisplayString($.basename),1)]),e.createElementVNode("div",ba,e.toDisplayString($.path),1)])],42,da))),256)):e.createCommentVNode("",!0),r.view=="list"&&!E.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(R(),($,Z)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:z=>S($),onTouchstart:T[6]||(T[6]=z=>j(z)),onTouchend:T[7]||(T[7]=z=>C()),onContextmenu:e.withModifiers(z=>e.unref(o).emit("vf-contextmenu-show",{event:z,area:y.value,items:q(),target:$}),["prevent"]),onDragstart:z=>oe(z),onDragover:z=>ae(z,$),onDrop:z=>se(z,$),class:e.normalizeClass(["vf-item-"+e.unref(D),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":$.type,"data-item":JSON.stringify($),"data-index":Z},[e.createElementVNode("div",wa,[e.createElementVNode("div",Sa,[$.type=="dir"?(e.openBlock(),e.createElementBlock("svg",_a,ka)):(e.openBlock(),e.createElementBlock("svg",xa,Da)),e.createElementVNode("span",Ea,e.toDisplayString($.basename),1)]),e.createElementVNode("div",Na,e.toDisplayString($.file_size?e.unref(Jt)($.file_size):""),1),e.createElementVNode("div",Va,e.toDisplayString(e.unref(Zt)($.last_modified)),1)])],42,va))),256)):e.createCommentVNode("",!0),r.view=="grid"&&!E.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(R(!1),($,Z)=>{var z;return e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:K=>S($),onTouchstart:T[8]||(T[8]=K=>j(K)),onTouchend:T[9]||(T[9]=K=>C()),onContextmenu:e.withModifiers(K=>e.unref(o).emit("vf-contextmenu-show",{event:K,area:y.value,items:q(),target:$}),["prevent"]),onDragstart:K=>oe(K),onDragover:K=>ae(K,$),onDrop:K=>se(K,$),class:e.normalizeClass(["vf-item-"+e.unref(D),"border border-transparent hover:bg-neutral-50 m-1 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 text-center justify-center select-none"]),"data-type":$.type,"data-item":JSON.stringify($),"data-index":Z},[e.createElementVNode("div",null,[e.createElementVNode("div",Ma,[$.type=="dir"?(e.openBlock(),e.createElementBlock("svg",$a,Ba)):(e.openBlock(),e.createElementBlock("svg",Ta,Aa)),!((z=$.mime_type)!=null?z:"").startsWith("image")&&$.type!="dir"?(e.openBlock(),e.createElementBlock("div",La,e.toDisplayString(c($.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Oa,e.toDisplayString(u($.basename)),1)])],42,Ca)}),256)):e.createCommentVNode("",!0)],34),e.createVNode(tn)]))}}),Ia="1.1.15",Pa={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},za={class:"flex leading-5 items-center"},Ha=["aria-label"],Ra=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1)],Fa=["value"],Ua={class:"ml-3"},Ka={key:0},Ya={class:"ml-1"},Wa={class:"flex leading-5 items-center"},Xa={value:"",disabled:""},qa=e.createElementVNode("option",{value:"en"},"English",-1),Ga=e.createElementVNode("option",{value:"fr"},"French",-1),Ja=e.createElementVNode("option",{value:"ru"},"Russian",-1),Za=e.createElementVNode("option",{value:"tr"},"Turkish",-1),Qa=["aria-label"],ei=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)],ti=Object.assign({name:"VFStatusbar"},{props:{data:Object},setup(r){const t=e.inject("emitter"),{getStore:o,setStore:n}=e.inject("storage"),l=e.ref(0),i=e.inject("adapter"),{t:c,changeLocale:u}=e.inject("i18n"),y=e.ref(o("locale","")),m=()=>{t.emit("vf-search-exit"),t.emit("vf-fetch",{params:{q:"index",adapter:i.value}}),n("adapter",i.value)};t.on("vf-nodes-selected",g=>{l.value=g.length});const f=e.ref("");return t.on("vf-search-query",({newQuery:g})=>{f.value=g}),(g,v)=>(e.openBlock(),e.createElementBlock("div",Pa,[e.createElementVNode("div",za,[e.createElementVNode("div",{class:"mx-2","aria-label":e.unref(c)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},Ra,8,Ha),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":v[0]||(v[0]=D=>e.isRef(i)?i.value=D:null),onChange:m,class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.data.storages,D=>(e.openBlock(),e.createElementBlock("option",{value:D},e.toDisplayString(D),9,Fa))),256))],544),[[e.vModelSelect,e.unref(i)]]),e.createElementVNode("div",Ua,[f.value.length?(e.openBlock(),e.createElementBlock("span",Ka,e.toDisplayString(r.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Ya,e.toDisplayString(l.value>0?l.value+" "+e.unref(c)("item(s) selected."):""),1)])]),e.createElementVNode("div",Wa,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":v[1]||(v[1]=D=>y.value=D),onChange:v[2]||(v[2]=D=>e.unref(u)(D.target.value)),class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8 mr-3"},[e.createElementVNode("option",Xa,e.toDisplayString(e.unref(c)("Language")),1),qa,Ga,Ja,Za],544),[[e.vModelSelect,y.value]]),e.createElementVNode("span",{class:"mr-1","aria-label":e.unref(c)("About"),"data-microtip-position":"top-left",role:"tooltip",onClick:v[3]||(v[3]=D=>e.unref(t).emit("vf-modal-show",{type:"message",title:"Vuefinder "+e.unref(Ia),message:e.unref(c)("Vuefinder is a file manager component for vue 3.")}))},ei,8,Qa)])]))}}),ri=(r,t=0,o=!1)=>{let n;return(...l)=>{o&&!n&&r(...l),clearTimeout(n),n=setTimeout(()=>{r(...l)},t)}},oi=(r,t,o)=>{const n=e.ref(r);return e.customRef((i,c)=>({get(){return i(),n.value},set:ri(u=>{n.value=u,c()},t,o)}))},ni={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-xs"},ai=["aria-label"],ii=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)],si=["aria-label"],li=[e.createElementVNode("path",{d:"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"},null,-1)],ci={key:1,"aria-label":"Cancel","data-microtip-position":"bottom-right",role:"tooltip"},di=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)],hi=e.createElementVNode("span",{class:"vf-flex-space"},null,-1),ui=["onClick"],fi=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1)],mi={class:"flex leading-5"},pi=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),gi=["title","onClick"],yi={key:0,class:"animate-spin p-1 h-6 w-6 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bi=[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)],vi={key:3,class:"relative flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full"},wi=e.createElementVNode("svg",{class:"h-6 w-6 p-1 stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),Si=["onKeydown","placeholder"],_i=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)],ki=Object.assign({name:"VFBreadcrumb"},{props:{data:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),l=e.ref(null),i=e.ref([]),c=e.ref(!1),u=e.ref(null),{t:y}=e.inject("i18n"),m=e.inject("loadingState");o.on("vf-explorer-update",()=>{var L;let C=[],V=[];l.value=(L=t.data.dirname)!=null?L:n.value+"://",l.value.length==0&&(i.value=[]),l.value.replace(n.value+"://","").split("/").forEach(function(j){C.push(j),C.join("/")!=""&&V.push({basename:j,name:j,path:n.value+"://"+C.join("/"),type:"dir"})}),V.length>4&&(V=V.slice(-5),V[0].name=".."),i.value=V});const f=()=>{c.value=!1,v.value=""};o.on("vf-search-exit",()=>{f()});const g=()=>{c.value=!0,e.nextTick(()=>u.value.focus())},v=oi("",400),D=()=>m.value;e.watch(v,C=>{o.emit("vf-toast-clear"),o.emit("vf-search-query",{newQuery:C})});const _=()=>i.value.length&&!c.value,k=C=>{var L;C.preventDefault();let V=JSON.parse(C.dataTransfer.getData("items"));if(V.find(j=>j.storage!=n.value)){alert("Moving items between different storages is not supported yet.");return}o.emit("vf-modal-show",{type:"move",items:{from:V,to:(L=i.value[i.value.length-2])!=null?L:{path:n.value+"://"}}})},E=C=>{C.preventDefault(),_()?C.dataTransfer.dropEffect="copy":(C.dataTransfer.dropEffect="none",C.dataTransfer.effectAllowed="none")},A=()=>{v.value==""&&f()};return(C,V)=>(e.openBlock(),e.createElementBlock("div",ni,[e.createElementVNode("span",{"aria-label":e.unref(y)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onDragover:V[0]||(V[0]=L=>E(L)),onDrop:V[1]||(V[1]=L=>k(L)),onClick:V[2]||(V[2]=L=>{var j,S;return!_()||e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:r.data.adapter,path:(S=(j=i.value[i.value.length-2])==null?void 0:j.path)!=null?S:e.unref(n)+"://"}})}),class:e.normalizeClass(["h-6 w-6 p-0.5 rounded",_()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ii,34))],8,ai),D()?(e.openBlock(),e.createElementBlock("span",ci,[(e.openBlock(),e.createElementBlock("svg",{onClick:V[4]||(V[4]=L=>e.unref(o).emit("vf-fetch-abort")),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer"},di))])):(e.openBlock(),e.createElementBlock("span",{key:0,"aria-label":e.unref(y)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:V[3]||(V[3]=L=>{e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:r.data.adapter,path:r.data.dirname}})}),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"-40 -40 580 580",fill:"currentColor"},li))],8,si)),hi,c.value?(e.openBlock(),e.createElementBlock("div",vi,[wi,e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:u,onKeydown:e.withKeys(f,["esc"]),onBlur:A,"onUpdate:modelValue":V[6]||(V[6]=L=>e.isRef(v)?v.value=L:null),placeholder:e.unref(y)("Search anything.."),class:"flex-1 ml-4 pt-1 pb-0 px-2 border-0 ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,Si),[[e.vModelText,e.unref(v)]]),(e.openBlock(),e.createElementBlock("svg",{class:"w-6 h-6 cursor-pointer",onClick:f,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},_i))])):(e.openBlock(),e.createElementBlock("div",{key:2,class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full",onClick:e.withModifiers(g,["self"])},[(e.openBlock(),e.createElementBlock("svg",{onClick:V[5]||(V[5]=L=>e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:r.data.adapter}})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fi)),e.createElementVNode("div",mi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(L,j)=>(e.openBlock(),e.createElementBlock("div",{key:j},[pi,e.createElementVNode("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:L.basename,onClick:S=>e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:r.data.adapter,path:L.path}})},e.toDisplayString(L.name),9,gi)]))),128))]),D()?(e.openBlock(),e.createElementBlock("svg",yi,bi)):e.createCommentVNode("",!0)],8,ui))]))}}),xi=["onClick"],Di=e.createElementVNode("span",{class:"px-1"},null,-1),Ei=Object.assign({name:"VFContextMenu"},{props:{current:Object},setup(r){const t=r,o=e.inject("emitter"),n=e.ref(null),{apiUrl:l}=he(),i=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),c=e.ref([]);o.on("vf-context-selected",v=>{c.value=v});const{t:u}=e.inject("i18n"),y={newfolder:{title:()=>u("New Folder"),action:()=>{o.emit("vf-modal-show",{type:"new-folder"})}},delete:{title:()=>u("Delete"),action:()=>{o.emit("vf-modal-show",{type:"delete",items:c})}},refresh:{title:()=>u("Refresh"),action:()=>{o.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:t.current.dirname}})}},preview:{title:()=>u("Preview"),action:()=>{o.emit("vf-modal-show",{type:"preview",adapter:t.current.adapter,item:c.value[0]})}},open:{title:()=>u("Open"),action:()=>{o.emit("vf-search-exit"),o.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:c.value[0].path}})}},openDir:{title:()=>u("Open containing folder"),action:()=>{o.emit("vf-search-exit"),o.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:c.value[0].dir}})}},download:{title:()=>u("Download"),action:()=>{const v=l.value+"?"+De({q:"download",adapter:t.current.adapter,path:c.value[0].path});o.emit("vf-download",v)}},archive:{title:()=>u("Archive"),action:()=>{o.emit("vf-modal-show",{type:"archive",items:c})}},unarchive:{title:()=>u("Unarchive"),action:()=>{o.emit("vf-modal-show",{type:"unarchive",items:c})}},rename:{title:()=>u("Rename"),action:()=>{o.emit("vf-modal-show",{type:"rename",items:c})}}},m=v=>{o.emit("vf-contextmenu-hide"),v.action()},f=e.ref("");o.on("vf-search-query",({newQuery:v})=>{f.value=v}),o.on("vf-contextmenu-show",({event:v,area:D,items:_,target:k=null})=>{if(i.items=[],f.value)if(k)i.items.push(y.openDir),o.emit("vf-context-selected",[k]);else return;else!k&&!f.value?(i.items.push(y.refresh),i.items.push(y.newfolder),o.emit("vf-context-selected",[])):_.length>1&&_.some(E=>E.path===k.path)?(i.items.push(y.refresh),i.items.push(y.archive),i.items.push(y.delete),o.emit("vf-context-selected",_)):(k.type=="dir"?i.items.push(y.open):(i.items.push(y.preview),i.items.push(y.download)),i.items.push(y.rename),k.mime_type=="application/zip"?i.items.push(y.unarchive):i.items.push(y.archive),i.items.push(y.delete),o.emit("vf-context-selected",[k]));g(v,D)}),o.on("vf-contextmenu-hide",()=>{i.active=!1});const g=(v,D)=>{i.active=!0,e.nextTick(()=>{let _=D.getBoundingClientRect(),k=v.pageX,E=v.pageY,A=n.value.offsetHeight,C=n.value.offsetWidth;k=_.right-v.pageX+window.scrollX<C?k-C:k,E=_.bottom-v.pageY+window.scrollY<A?E-A:E,i.positions={left:k+"px",top:E+"px"}})};return(v,D)=>i.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref_key:"contextmenu",ref:n,style:e.normalizeStyle(i.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.items,_=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:_.title,onClick:k=>m(_)},[Di,e.createElementVNode("span",null,e.toDisplayString(_.title()),1)],8,xi))),128))],4)):e.createCommentVNode("",!0)}}),Ni=(r,t)=>{const o=r[t];return o?typeof o=="function"?o():Promise.resolve(o):new Promise((n,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+t)))})};async function Vi(r){const t=await Ni(Object.assign({"../locales/en.json":()=>Promise.resolve().then(()=>ad),"../locales/ru.json":()=>Promise.resolve().then(()=>id),"../locales/tr.json":()=>Promise.resolve().then(()=>sd)}),`../locales/${r}.json`);return JSON.parse(t.default)}function Ci(r,t,o){const{getStore:n,setStore:l}=yt(r),i=e.ref({}),c=m=>{Vi(m).then(f=>{i.value=f,l("locale",m),l("translations",f),o.emit("vf-toast-push",{label:"The language is set to "+m})}).catch(f=>{o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),c("en")})};n("locale")?i.value=n("translations"):c(t);const u=(m,...f)=>f.length?u(m=m.replace("%s",f.shift()),...f):m;function y(m,...f){return i.value.hasOwnProperty(m)?u(i.value[m],...f):m}return{t:y,changeLocale:c}}const Mi={class:"vuefinder"},$i=e.createElementVNode("iframe",{id:"download_frame",style:{display:"none"}},null,-1),Bi=Object.assign({name:"VueFinder"},{props:{url:{type:[String]},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1},locale:{type:String,default:"en"},maxHeight:{type:String,default:"600px"},postData:{type:Object,default:{}},accessToken:{type:String},hook:{type:Function,required:!1,default:null}},setup(r){const t=r,o=bo(),{setStore:n,getStore:l}=yt(t.id),i=e.ref(l("adapter"));e.provide("emitter",o),e.provide("storage",yt(t.id)),e.provide("postData",t.postData),e.provide("adapter",i);const c=Ci(t.id,t.locale,o);e.provide("i18n",c);const{apiUrl:u,setApiUrl:y}=he();y(t.url);const m=e.reactive({adapter:i.value,storages:[],dirname:".",files:[]}),f=e.ref(l("viewport","grid")),g=e.ref(l("darkMode",t.dark));o.on("vf-darkMode-toggle",()=>{g.value=!g.value,n("darkMode",g.value)});const v=e.ref(!1);e.provide("loadingState",v),e.provide("accessToken",t.accessToken);const D=e.ref(l("full-screen",!1));o.on("vf-fullscreen-toggle",()=>{D.value=!D.value,n("full-screen",D.value)}),o.on("vf-view-toggle",C=>{f.value=C});const _=e.reactive({active:!1,type:"delete",data:{}});o.on("vf-modal-close",()=>{_.active=!1}),o.on("vf-modal-show",C=>{(!t.hook||t.hook.call(null,"vf-modal-show",C,o)!==!1)&&(_.active=!0,_.type=C.type,_.data=C)});const k=C=>{Object.assign(m,C),o.emit("vf-nodes-selected",{}),o.emit("vf-explorer-update")};let E;o.on("vf-fetch-abort",()=>{E.abort(),v.value=!1});const A=e.ref(!1);return o.on("vf-show-hidden-toggle",()=>{A.value=!A.value,o.emit("vf-fetch",{params:{q:"index",adapter:m.adapter,path:m.dirname}})}),o.on("vf-fetch",({params:C,onSuccess:V=null,onError:L=null})=>{["index","search"].includes(C.q)&&(E&&E.abort(),v.value=!0),E=new AbortController;const j=E.signal;C.hidden=A.value===!0,ot(u.value,{params:C,signal:j,headers:{Authorization:t.accessToken?"Bearer "+t.accessToken:null}}).then(S=>{i.value=S.adapter,["index","search"].includes(C.q)&&(v.value=!1),o.emit("vf-modal-close"),k(S),V(S)}).catch(S=>{L&&L(S)}).finally(()=>{})}),o.on("vf-download",C=>{document.getElementById("download_frame").src=C,o.emit("vf-modal-close")}),e.onMounted(()=>{o.emit("vf-fetch",{params:{q:"index",adapter:i.value}})}),(C,V)=>(e.openBlock(),e.createElementBlock("div",Mi,[e.createElementVNode("div",{class:e.normalizeClass(g.value?"dark":"")},[e.createElementVNode("div",{class:e.normalizeClass([D.value?"fixed w-screen inset-0 z-20":"relative rounded-md","border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none"]),style:e.normalizeStyle(D.value?"":"max-height: "+r.maxHeight),onMousedown:V[0]||(V[0]=L=>e.unref(o).emit("vf-contextmenu-hide")),onTouchstart:V[1]||(V[1]=L=>e.unref(o).emit("vf-contextmenu-hide"))},[e.createVNode(Wo,{data:m},null,8,["data"]),e.createVNode(ki,{data:m},null,8,["data"]),e.createVNode(ja,{view:f.value,data:m},null,8,["view","data"]),e.createVNode(ti,{data:m},null,8,["data"])],38),_.active?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-f-modal-"+_.type),{key:0,selection:_.data,current:m},null,8,["selection","current"])):e.createCommentVNode("",!0),e.createVNode(Ei,{current:m},null,8,["current"]),$i],2)]))}}),Ti=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),Ai={class:"fixed z-10 inset-0 overflow-hidden"},Li={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-5xl w-full"},Oi={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ji={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},fe={__name:"ModalLayout",setup(r){const t=e.inject("emitter");return e.onMounted(()=>{const o=document.querySelector(".v-f-modal input");o&&o.focus()}),(o,n)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:n[1]||(n[1]=e.withKeys(l=>e.unref(t).emit("vf-modal-close"),["esc"])),tabindex:"0"},[Ti,e.createElementVNode("div",Ai,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:n[0]||(n[0]=e.withModifiers(l=>e.unref(t).emit("vf-modal-close"),["self"]))},[e.createElementVNode("div",Li,[e.createElementVNode("div",Oi,[e.renderSlot(o.$slots,"default")]),e.createElementVNode("div",ji,[e.renderSlot(o.$slots,"buttons")])])],32)])],32))}},Ii=["aria-label"],Pi=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)],me=Object.assign({name:"Message"},{props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(r,{emit:t}){var u;const{t:o}=e.inject("i18n"),n=e.ref(!1),l=e.ref(null),i=e.ref((u=l.value)==null?void 0:u.strMessage);e.watch(i,()=>n.value=!1);const c=()=>{t("hidden"),n.value=!0};return(y,m)=>(e.openBlock(),e.createElementBlock("div",null,[n.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:l,class:e.normalizeClass(["flex mt-1 p-1 px-2 rounded text-sm",r.error?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"])},[e.renderSlot(y.$slots,"default"),e.createElementVNode("div",{class:"ml-auto cursor-pointer",onClick:c,"aria-label":e.unref(o)("Close"),"data-microtip-position":"top-left",role:"tooltip"},Pi,8,Ii)],2))]))}}),zi={class:"sm:flex sm:items-start"},Hi=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),Ri={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Fi={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Ui={class:"mt-2"},Ki={class:"text-sm text-gray-500"},Yi={class:"flex text-sm text-gray-800 dark:text-gray-400"},Wi={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Xi=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],qi={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gi=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ji={class:"ml-1.5"},Zi={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},Qi=Object.assign({name:"VFModalDelete"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:l}=e.inject("i18n"),i=e.ref(t.selection.items),c=e.ref(""),u=()=>{i.value.length&&o.emit("vf-fetch",{params:{q:"delete",adapter:n.value,path:t.current.dirname,items:JSON.stringify(i.value.map(({path:y,type:m})=>({path:y,type:m})))},onSuccess:()=>{o.emit("vf-toast-push",{label:l("Files deleted.")})},onError:y=>{c.value=l(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=f=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1),e.createElementVNode("div",Zi,e.toDisplayString(e.unref(l)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",zi,[Hi,e.createElementVNode("div",Ri,[e.createElementVNode("h3",Fi,e.toDisplayString(e.unref(l)("Delete files")),1),e.createElementVNode("div",Ui,[e.createElementVNode("p",Ki,e.toDisplayString(e.unref(l)("Are you sure you want to delete these files?")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,f=>(e.openBlock(),e.createElementBlock("p",Yi,[f.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Wi,Xi)):(e.openBlock(),e.createElementBlock("svg",qi,Gi)),e.createElementVNode("span",Ji,e.toDisplayString(f.basename),1)]))),256)),c.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:m[0]||(m[0]=f=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),es={class:"sm:flex sm:items-start"},ts=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),rs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},os={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ns={class:"mt-2"},as={class:"text-sm text-gray-500"},is=Object.assign({name:"VFModalMessage"},{props:{selection:Object},setup(r){const t=e.inject("emitter"),{t:o}=e.inject("i18n");return(n,l)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l[0]||(l[0]=i=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(o)("Close")),1)]),default:e.withCtx(()=>{var i,c,u,y;return[e.createElementVNode("div",es,[ts,e.createElementVNode("div",rs,[e.createElementVNode("h3",os,e.toDisplayString((c=(i=r.selection)==null?void 0:i.title)!=null?c:"Title"),1),e.createElementVNode("div",ns,[e.createElementVNode("p",as,e.toDisplayString((y=(u=r.selection)==null?void 0:u.message)!=null?y:"Message")+".",1)])])])]}),_:1}))}}),ss={class:"sm:flex sm:items-start"},ls=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),cs={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ds={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},hs={class:"mt-2"},us={class:"text-sm text-gray-500"},fs=["onKeyup","placeholder"],ms=Object.assign({name:"VFModalNewFolder"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:l}=e.inject("i18n"),i=e.ref(""),c=e.ref(""),u=()=>{i.value!=""&&o.emit("vf-fetch",{params:{q:"newfolder",adapter:n.value,path:t.current.dirname,name:i.value},onSuccess:()=>{o.emit("vf-toast-push",{label:l("%s is created.",i.value)})},onError:y=>{c.value=l(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=f=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",ss,[ls,e.createElementVNode("div",cs,[e.createElementVNode("h3",ds,e.toDisplayString(e.unref(l)("New Folder")),1),e.createElementVNode("div",hs,[e.createElementVNode("p",us,e.toDisplayString(e.unref(l)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>i.value=f),onKeyup:e.withKeys(u,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(l)("Folder Name"),type:"text"},null,40,fs),[[e.vModelText,i.value]]),c.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:m[1]||(m[1]=f=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ps={class:"sm:flex sm:items-start"},gs=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),ys={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},bs={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},vs={class:"mt-2"},ws={class:"text-sm text-gray-500"},Ss=["onKeyup","placeholder"],_s=Object.assign({name:"VFModalNewFile"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:l}=e.inject("i18n"),i=e.ref(""),c=e.ref(""),u=()=>{i.value!=""&&o.emit("vf-fetch",{params:{q:"newfile",adapter:n.value,path:t.current.dirname,name:i.value},onSuccess:()=>{o.emit("vf-toast-push",{label:l("%s is created.",i.value)})},onError:y=>{c.value=l(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=f=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",ps,[gs,e.createElementVNode("div",ys,[e.createElementVNode("h3",bs,e.toDisplayString(e.unref(l)("New File")),1),e.createElementVNode("div",vs,[e.createElementVNode("p",ws,e.toDisplayString(e.unref(l)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=f=>i.value=f),onKeyup:e.withKeys(u,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(l)("File Name"),type:"text"},null,40,Ss),[[e.vModelText,i.value]]),c.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:m[1]||(m[1]=f=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ks={class:"flex"},xs=["aria-label"],Ds={class:"ml-auto mb-2"},Es={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},Ns={key:1},Vs={__name:"Text",props:{selection:Object},emits:["load"],setup(r,{emit:t}){const o=r,n=e.ref(""),l=e.ref(""),i=e.ref(null),c=e.ref(!1),{apiUrl:u}=he(),y=e.ref(""),m=e.ref(!1),{t:f}=e.inject("i18n"),g=e.inject("accessToken");e.onMounted(()=>{ot(u.value,{params:{q:"preview",adapter:o.selection.adapter,path:o.selection.item.path},json:!1,headers:{Authorization:g?"Bearer "+g:null}}).then(k=>{n.value=k,t("load")})});const v=()=>{c.value=!c.value,l.value=n.value,c.value==!0&&e.nextTick(()=>{i.value.focus()})},D=e.inject("postData"),_=()=>{y.value="",m.value=!1,ot(u.value,{method:"POST",params:Object.assign(D,{q:"save",adapter:o.selection.adapter,path:o.selection.item.path,content:l.value}),json:!1,headers:{Authorization:g?"Bearer "+g:null}}).then(k=>{y.value=f("Updated."),n.value=k,t("load"),c.value=!c.value}).catch(k=>{y.value=f(k.message),m.value=!0})};return(k,E)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",ks,[e.createElementVNode("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":r.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(r.selection.item.basename),9,xs),e.createElementVNode("div",Ds,[c.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:_,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(f)("Save")),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:E[0]||(E[0]=A=>v())},e.toDisplayString(c.value?e.unref(f)("Cancel"):e.unref(f)("Edit")),1)])]),e.createElementVNode("div",null,[c.value?(e.openBlock(),e.createElementBlock("div",Ns,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:i,"onUpdate:modelValue":E[1]||(E[1]=A=>l.value=A),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh] text-xs",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",Es,e.toDisplayString(n.value),1)),y.value.length?(e.openBlock(),e.createBlock(me,{key:2,onHidden:E[2]||(E[2]=A=>y.value=""),error:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])],64))}},Ch="";/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function Tr(r,t){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),o.push.apply(o,n)}return o}function Ar(r){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Tr(Object(o),!0).forEach(function(n){$s(r,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Tr(Object(o)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(o,n))})}return r}function dt(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(t){return typeof t}:dt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(r)}function Cs(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(r,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ms(r,t,o){return t&&Lr(r.prototype,t),o&&Lr(r,o),r}function $s(r,t,o){return t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r}function Or(r){return Bs(r)||Ts(r)||As(r)||Ls()}function Bs(r){if(Array.isArray(r))return Mt(r)}function Ts(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function As(r,t){if(!!r){if(typeof r=="string")return Mt(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);if(o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set")return Array.from(r);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Mt(r,t)}}function Mt(r,t){(t==null||t>r.length)&&(t=r.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=r[o];return n}function Ls(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ht=typeof window<"u"&&typeof window.document<"u",pe=ht?window:{},$t=ht&&pe.document.documentElement?"ontouchstart"in pe.document.documentElement:!1,Bt=ht?"PointerEvent"in pe:!1,F="cropper",Tt="all",jr="crop",Ir="move",Pr="zoom",Ve="e",Ce="w",Ae="s",Se="n",We="ne",Xe="nw",qe="se",Ge="sw",At="".concat(F,"-crop"),zr="".concat(F,"-disabled"),te="".concat(F,"-hidden"),Hr="".concat(F,"-hide"),Os="".concat(F,"-invisible"),ut="".concat(F,"-modal"),Lt="".concat(F,"-move"),Je="".concat(F,"Action"),ft="".concat(F,"Preview"),Ot="crop",Rr="move",Fr="none",jt="crop",It="cropend",Pt="cropmove",zt="cropstart",Ur="dblclick",js=$t?"touchstart":"mousedown",Is=$t?"touchmove":"mousemove",Ps=$t?"touchend touchcancel":"mouseup",Kr=Bt?"pointerdown":js,Yr=Bt?"pointermove":Is,Wr=Bt?"pointerup pointercancel":Ps,Xr="ready",qr="resize",Gr="wheel",Ht="zoom",Jr="image/jpeg",zs=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Hs=/^data:/,Rs=/^data:image\/jpeg;base64,/,Fs=/^img|canvas$/i,Zr=200,Qr=100,eo={viewMode:0,dragMode:Ot,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Zr,minContainerHeight:Qr,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Us='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ks=Number.isNaN||pe.isNaN;function O(r){return typeof r=="number"&&!Ks(r)}var to=function(t){return t>0&&t<1/0};function Rt(r){return typeof r>"u"}function Me(r){return dt(r)==="object"&&r!==null}var Ys=Object.prototype.hasOwnProperty;function Le(r){if(!Me(r))return!1;try{var t=r.constructor,o=t.prototype;return t&&o&&Ys.call(o,"isPrototypeOf")}catch{return!1}}function re(r){return typeof r=="function"}var Ws=Array.prototype.slice;function ro(r){return Array.from?Array.from(r):Ws.call(r)}function W(r,t){return r&&re(t)&&(Array.isArray(r)||O(r.length)?ro(r).forEach(function(o,n){t.call(r,o,n,r)}):Me(r)&&Object.keys(r).forEach(function(o){t.call(r,r[o],o,r)})),r}var U=Object.assign||function(t){for(var o=arguments.length,n=new Array(o>1?o-1:0),l=1;l<o;l++)n[l-1]=arguments[l];return Me(t)&&n.length>0&&n.forEach(function(i){Me(i)&&Object.keys(i).forEach(function(c){t[c]=i[c]})}),t},Xs=/\.\d*(?:0|9){12}\d*$/;function Oe(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Xs.test(r)?Math.round(r*t)/t:r}var qs=/^width|height|left|top|marginLeft|marginTop$/;function _e(r,t){var o=r.style;W(t,function(n,l){qs.test(l)&&O(n)&&(n="".concat(n,"px")),o[l]=n})}function Gs(r,t){return r.classList?r.classList.contains(t):r.className.indexOf(t)>-1}function J(r,t){if(!!t){if(O(r.length)){W(r,function(n){J(n,t)});return}if(r.classList){r.classList.add(t);return}var o=r.className.trim();o?o.indexOf(t)<0&&(r.className="".concat(o," ").concat(t)):r.className=t}}function ge(r,t){if(!!t){if(O(r.length)){W(r,function(o){ge(o,t)});return}if(r.classList){r.classList.remove(t);return}r.className.indexOf(t)>=0&&(r.className=r.className.replace(t,""))}}function je(r,t,o){if(!!t){if(O(r.length)){W(r,function(n){je(n,t,o)});return}o?J(r,t):ge(r,t)}}var Js=/([a-z\d])([A-Z])/g;function Ft(r){return r.replace(Js,"$1-$2").toLowerCase()}function Ut(r,t){return Me(r[t])?r[t]:r.dataset?r.dataset[t]:r.getAttribute("data-".concat(Ft(t)))}function Ze(r,t,o){Me(o)?r[t]=o:r.dataset?r.dataset[t]=o:r.setAttribute("data-".concat(Ft(t)),o)}function Zs(r,t){if(Me(r[t]))try{delete r[t]}catch{r[t]=void 0}else if(r.dataset)try{delete r.dataset[t]}catch{r.dataset[t]=void 0}else r.removeAttribute("data-".concat(Ft(t)))}var oo=/\s\s*/,no=function(){var r=!1;if(ht){var t=!1,o=function(){},n=Object.defineProperty({},"once",{get:function(){return r=!0,t},set:function(i){t=i}});pe.addEventListener("test",o,n),pe.removeEventListener("test",o,n)}return r}();function le(r,t,o){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=o;t.trim().split(oo).forEach(function(i){if(!no){var c=r.listeners;c&&c[i]&&c[i][o]&&(l=c[i][o],delete c[i][o],Object.keys(c[i]).length===0&&delete c[i],Object.keys(c).length===0&&delete r.listeners)}r.removeEventListener(i,l,n)})}function ie(r,t,o){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=o;t.trim().split(oo).forEach(function(i){if(n.once&&!no){var c=r.listeners,u=c===void 0?{}:c;l=function(){delete u[i][o],r.removeEventListener(i,l,n);for(var m=arguments.length,f=new Array(m),g=0;g<m;g++)f[g]=arguments[g];o.apply(r,f)},u[i]||(u[i]={}),u[i][o]&&r.removeEventListener(i,u[i][o],n),u[i][o]=l,r.listeners=u}r.addEventListener(i,l,n)})}function Ie(r,t,o){var n;return re(Event)&&re(CustomEvent)?n=new CustomEvent(t,{detail:o,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,o)),r.dispatchEvent(n)}function ao(r){var t=r.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Kt=pe.location,Qs=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function io(r){var t=r.match(Qs);return t!==null&&(t[1]!==Kt.protocol||t[2]!==Kt.hostname||t[3]!==Kt.port)}function so(r){var t="timestamp=".concat(new Date().getTime());return r+(r.indexOf("?")===-1?"?":"&")+t}function Qe(r){var t=r.rotate,o=r.scaleX,n=r.scaleY,l=r.translateX,i=r.translateY,c=[];O(l)&&l!==0&&c.push("translateX(".concat(l,"px)")),O(i)&&i!==0&&c.push("translateY(".concat(i,"px)")),O(t)&&t!==0&&c.push("rotate(".concat(t,"deg)")),O(o)&&o!==1&&c.push("scaleX(".concat(o,")")),O(n)&&n!==1&&c.push("scaleY(".concat(n,")"));var u=c.length?c.join(" "):"none";return{WebkitTransform:u,msTransform:u,transform:u}}function el(r){var t=Ar({},r),o=0;return W(r,function(n,l){delete t[l],W(t,function(i){var c=Math.abs(n.startX-i.startX),u=Math.abs(n.startY-i.startY),y=Math.abs(n.endX-i.endX),m=Math.abs(n.endY-i.endY),f=Math.sqrt(c*c+u*u),g=Math.sqrt(y*y+m*m),v=(g-f)/f;Math.abs(v)>Math.abs(o)&&(o=v)})}),o}function mt(r,t){var o=r.pageX,n=r.pageY,l={endX:o,endY:n};return t?l:Ar({startX:o,startY:n},l)}function tl(r){var t=0,o=0,n=0;return W(r,function(l){var i=l.startX,c=l.startY;t+=i,o+=c,n+=1}),t/=n,o/=n,{pageX:t,pageY:o}}function ke(r){var t=r.aspectRatio,o=r.height,n=r.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",i=to(n),c=to(o);if(i&&c){var u=o*t;l==="contain"&&u>n||l==="cover"&&u<n?o=n/t:n=o*t}else i?o=n/t:c&&(n=o*t);return{width:n,height:o}}function rl(r){var t=r.width,o=r.height,n=r.degree;if(n=Math.abs(n)%180,n===90)return{width:o,height:t};var l=n%90*Math.PI/180,i=Math.sin(l),c=Math.cos(l),u=t*c+o*i,y=t*i+o*c;return n>90?{width:y,height:u}:{width:u,height:y}}function ol(r,t,o,n){var l=t.aspectRatio,i=t.naturalWidth,c=t.naturalHeight,u=t.rotate,y=u===void 0?0:u,m=t.scaleX,f=m===void 0?1:m,g=t.scaleY,v=g===void 0?1:g,D=o.aspectRatio,_=o.naturalWidth,k=o.naturalHeight,E=n.fillColor,A=E===void 0?"transparent":E,C=n.imageSmoothingEnabled,V=C===void 0?!0:C,L=n.imageSmoothingQuality,j=L===void 0?"low":L,S=n.maxWidth,M=S===void 0?1/0:S,R=n.maxHeight,X=R===void 0?1/0:R,q=n.minWidth,oe=q===void 0?0:q,se=n.minHeight,ae=se===void 0?0:se,H=document.createElement("canvas"),N=H.getContext("2d"),T=ke({aspectRatio:D,width:M,height:X}),$=ke({aspectRatio:D,width:oe,height:ae},"cover"),Z=Math.min(T.width,Math.max($.width,_)),z=Math.min(T.height,Math.max($.height,k)),K=ke({aspectRatio:l,width:M,height:X}),ce=ke({aspectRatio:l,width:oe,height:ae},"cover"),pt=Math.min(K.width,Math.max(ce.width,i)),Pe=Math.min(K.height,Math.max(ce.height,c)),Wt=[-pt/2,-Pe/2,pt,Pe];return H.width=Oe(Z),H.height=Oe(z),N.fillStyle=A,N.fillRect(0,0,Z,z),N.save(),N.translate(Z/2,z/2),N.rotate(y*Math.PI/180),N.scale(f,v),N.imageSmoothingEnabled=V,N.imageSmoothingQuality=j,N.drawImage.apply(N,[r].concat(Or(Wt.map(function(ze){return Math.floor(Oe(ze))})))),N.restore(),H}var lo=String.fromCharCode;function nl(r,t,o){var n="";o+=t;for(var l=t;l<o;l+=1)n+=lo(r.getUint8(l));return n}var al=/^data:.*,/;function il(r){var t=r.replace(al,""),o=atob(t),n=new ArrayBuffer(o.length),l=new Uint8Array(n);return W(l,function(i,c){l[c]=o.charCodeAt(c)}),n}function sl(r,t){for(var o=[],n=8192,l=new Uint8Array(r);l.length>0;)o.push(lo.apply(null,ro(l.subarray(0,n)))),l=l.subarray(n);return"data:".concat(t,";base64,").concat(btoa(o.join("")))}function ll(r){var t=new DataView(r),o;try{var n,l,i;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var c=t.byteLength,u=2;u+1<c;){if(t.getUint8(u)===255&&t.getUint8(u+1)===225){l=u;break}u+=1}if(l){var y=l+4,m=l+10;if(nl(t,y,4)==="Exif"){var f=t.getUint16(m);if(n=f===18761,(n||f===19789)&&t.getUint16(m+2,n)===42){var g=t.getUint32(m+4,n);g>=8&&(i=m+g)}}}if(i){var v=t.getUint16(i,n),D,_;for(_=0;_<v;_+=1)if(D=i+_*12+2,t.getUint16(D,n)===274){D+=8,o=t.getUint16(D,n),t.setUint16(D,1,n);break}}}catch{o=1}return o}function cl(r){var t=0,o=1,n=1;switch(r){case 2:o=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,o=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:o,scaleY:n}}var dl={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,o=this.options,n=this.container,l=this.cropper,i=Number(o.minContainerWidth),c=Number(o.minContainerHeight);J(l,te),ge(t,te);var u={width:Math.max(n.offsetWidth,i>=0?i:Zr),height:Math.max(n.offsetHeight,c>=0?c:Qr)};this.containerData=u,_e(l,{width:u.width,height:u.height}),J(t,te),ge(l,te)},initCanvas:function(){var t=this.containerData,o=this.imageData,n=this.options.viewMode,l=Math.abs(o.rotate)%180===90,i=l?o.naturalHeight:o.naturalWidth,c=l?o.naturalWidth:o.naturalHeight,u=i/c,y=t.width,m=t.height;t.height*u>t.width?n===3?y=t.height*u:m=t.width/u:n===3?m=t.width/u:y=t.height*u;var f={aspectRatio:u,naturalWidth:i,naturalHeight:c,width:y,height:m};this.canvasData=f,this.limited=n===1||n===2,this.limitCanvas(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.left=(t.width-f.width)/2,f.top=(t.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,this.initialCanvasData=U({},f)},limitCanvas:function(t,o){var n=this.options,l=this.containerData,i=this.canvasData,c=this.cropBoxData,u=n.viewMode,y=i.aspectRatio,m=this.cropped&&c;if(t){var f=Number(n.minCanvasWidth)||0,g=Number(n.minCanvasHeight)||0;u>1?(f=Math.max(f,l.width),g=Math.max(g,l.height),u===3&&(g*y>f?f=g*y:g=f/y)):u>0&&(f?f=Math.max(f,m?c.width:0):g?g=Math.max(g,m?c.height:0):m&&(f=c.width,g=c.height,g*y>f?f=g*y:g=f/y));var v=ke({aspectRatio:y,width:f,height:g});f=v.width,g=v.height,i.minWidth=f,i.minHeight=g,i.maxWidth=1/0,i.maxHeight=1/0}if(o)if(u>(m?0:1)){var D=l.width-i.width,_=l.height-i.height;i.minLeft=Math.min(0,D),i.minTop=Math.min(0,_),i.maxLeft=Math.max(0,D),i.maxTop=Math.max(0,_),m&&this.limited&&(i.minLeft=Math.min(c.left,c.left+(c.width-i.width)),i.minTop=Math.min(c.top,c.top+(c.height-i.height)),i.maxLeft=c.left,i.maxTop=c.top,u===2&&(i.width>=l.width&&(i.minLeft=Math.min(0,D),i.maxLeft=Math.max(0,D)),i.height>=l.height&&(i.minTop=Math.min(0,_),i.maxTop=Math.max(0,_))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=l.width,i.maxTop=l.height},renderCanvas:function(t,o){var n=this.canvasData,l=this.imageData;if(o){var i=rl({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),c=i.width,u=i.height,y=n.width*(c/n.naturalWidth),m=n.height*(u/n.naturalHeight);n.left-=(y-n.width)/2,n.top-=(m-n.height)/2,n.width=y,n.height=m,n.aspectRatio=c/u,n.naturalWidth=c,n.naturalHeight=u,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,_e(this.canvas,U({width:n.width,height:n.height},Qe({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var o=this.canvasData,n=this.imageData,l=n.naturalWidth*(o.width/o.naturalWidth),i=n.naturalHeight*(o.height/o.naturalHeight);U(n,{width:l,height:i,left:(o.width-l)/2,top:(o.height-i)/2}),_e(this.image,U({width:n.width,height:n.height},Qe(U({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,o=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,i={width:o.width,height:o.height};n&&(o.height*n>o.width?i.height=i.width/n:i.width=i.height*n),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*l),i.height=Math.max(i.minHeight,i.height*l),i.left=o.left+(o.width-i.width)/2,i.top=o.top+(o.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=U({},i)},limitCropBox:function(t,o){var n=this.options,l=this.containerData,i=this.canvasData,c=this.cropBoxData,u=this.limited,y=n.aspectRatio;if(t){var m=Number(n.minCropBoxWidth)||0,f=Number(n.minCropBoxHeight)||0,g=u?Math.min(l.width,i.width,i.width+i.left,l.width-i.left):l.width,v=u?Math.min(l.height,i.height,i.height+i.top,l.height-i.top):l.height;m=Math.min(m,l.width),f=Math.min(f,l.height),y&&(m&&f?f*y>m?f=m/y:m=f*y:m?f=m/y:f&&(m=f*y),v*y>g?v=g/y:g=v*y),c.minWidth=Math.min(m,g),c.minHeight=Math.min(f,v),c.maxWidth=g,c.maxHeight=v}o&&(u?(c.minLeft=Math.max(0,i.left),c.minTop=Math.max(0,i.top),c.maxLeft=Math.min(l.width,i.left+i.width)-c.width,c.maxTop=Math.min(l.height,i.top+i.height)-c.height):(c.minLeft=0,c.minTop=0,c.maxLeft=l.width-c.width,c.maxTop=l.height-c.height))},renderCropBox:function(){var t=this.options,o=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&Ze(this.face,Je,n.width>=o.width&&n.height>=o.height?Ir:Tt),_e(this.cropBox,U({width:n.width,height:n.height},Qe({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ie(this.element,jt,this.getData())}},hl={initPreview:function(){var t=this.element,o=this.crossOrigin,n=this.options.preview,l=o?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",c=document.createElement("img");if(o&&(c.crossOrigin=o),c.src=l,c.alt=i,this.viewBox.appendChild(c),this.viewBoxImage=c,!!n){var u=n;typeof n=="string"?u=t.ownerDocument.querySelectorAll(n):n.querySelector&&(u=[n]),this.previews=u,W(u,function(y){var m=document.createElement("img");Ze(y,ft,{width:y.offsetWidth,height:y.offsetHeight,html:y.innerHTML}),o&&(m.crossOrigin=o),m.src=l,m.alt=i,m.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',y.innerHTML="",y.appendChild(m)})}},resetPreview:function(){W(this.previews,function(t){var o=Ut(t,ft);_e(t,{width:o.width,height:o.height}),t.innerHTML=o.html,Zs(t,ft)})},preview:function(){var t=this.imageData,o=this.canvasData,n=this.cropBoxData,l=n.width,i=n.height,c=t.width,u=t.height,y=n.left-o.left-t.left,m=n.top-o.top-t.top;!this.cropped||this.disabled||(_e(this.viewBoxImage,U({width:c,height:u},Qe(U({translateX:-y,translateY:-m},t)))),W(this.previews,function(f){var g=Ut(f,ft),v=g.width,D=g.height,_=v,k=D,E=1;l&&(E=v/l,k=i*E),i&&k>D&&(E=D/i,_=l*E,k=D),_e(f,{width:_,height:k}),_e(f.getElementsByTagName("img")[0],U({width:c*E,height:u*E},Qe(U({translateX:-y*E,translateY:-m*E},t))))}))}},ul={bind:function(){var t=this.element,o=this.options,n=this.cropper;re(o.cropstart)&&ie(t,zt,o.cropstart),re(o.cropmove)&&ie(t,Pt,o.cropmove),re(o.cropend)&&ie(t,It,o.cropend),re(o.crop)&&ie(t,jt,o.crop),re(o.zoom)&&ie(t,Ht,o.zoom),ie(n,Kr,this.onCropStart=this.cropStart.bind(this)),o.zoomable&&o.zoomOnWheel&&ie(n,Gr,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),o.toggleDragModeOnDblclick&&ie(n,Ur,this.onDblclick=this.dblclick.bind(this)),ie(t.ownerDocument,Yr,this.onCropMove=this.cropMove.bind(this)),ie(t.ownerDocument,Wr,this.onCropEnd=this.cropEnd.bind(this)),o.responsive&&ie(window,qr,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,o=this.options,n=this.cropper;re(o.cropstart)&&le(t,zt,o.cropstart),re(o.cropmove)&&le(t,Pt,o.cropmove),re(o.cropend)&&le(t,It,o.cropend),re(o.crop)&&le(t,jt,o.crop),re(o.zoom)&&le(t,Ht,o.zoom),le(n,Kr,this.onCropStart),o.zoomable&&o.zoomOnWheel&&le(n,Gr,this.onWheel,{passive:!1,capture:!0}),o.toggleDragModeOnDblclick&&le(n,Ur,this.onDblclick),le(t.ownerDocument,Yr,this.onCropMove),le(t.ownerDocument,Wr,this.onCropEnd),o.responsive&&le(window,qr,this.onResize)}},fl={resize:function(){if(!this.disabled){var t=this.options,o=this.container,n=this.containerData,l=o.offsetWidth/n.width,i=o.offsetHeight/n.height,c=Math.abs(l-1)>Math.abs(i-1)?l:i;if(c!==1){var u,y;t.restore&&(u=this.getCanvasData(),y=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(W(u,function(m,f){u[f]=m*c})),this.setCropBoxData(W(y,function(m,f){y[f]=m*c})))}}},dblclick:function(){this.disabled||this.options.dragMode===Fr||this.setDragMode(Gs(this.dragBox,At)?Rr:Ot)},wheel:function(t){var o=this,n=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){o.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*n,t)))},cropStart:function(t){var o=t.buttons,n=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(O(o)&&o!==1||O(n)&&n!==0||t.ctrlKey))){var l=this.options,i=this.pointers,c;t.changedTouches?W(t.changedTouches,function(u){i[u.identifier]=mt(u)}):i[t.pointerId||0]=mt(t),Object.keys(i).length>1&&l.zoomable&&l.zoomOnTouch?c=Pr:c=Ut(t.target,Je),!!zs.test(c)&&Ie(this.element,zt,{originalEvent:t,action:c})!==!1&&(t.preventDefault(),this.action=c,this.cropping=!1,c===jr&&(this.cropping=!0,J(this.dragBox,ut)))}},cropMove:function(t){var o=this.action;if(!(this.disabled||!o)){var n=this.pointers;t.preventDefault(),Ie(this.element,Pt,{originalEvent:t,action:o})!==!1&&(t.changedTouches?W(t.changedTouches,function(l){U(n[l.identifier]||{},mt(l,!0))}):U(n[t.pointerId||0]||{},mt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var o=this.action,n=this.pointers;t.changedTouches?W(t.changedTouches,function(l){delete n[l.identifier]}):delete n[t.pointerId||0],o&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,je(this.dragBox,ut,this.cropped&&this.options.modal)),Ie(this.element,It,{originalEvent:t,action:o}))}}},ml={change:function(t){var o=this.options,n=this.canvasData,l=this.containerData,i=this.cropBoxData,c=this.pointers,u=this.action,y=o.aspectRatio,m=i.left,f=i.top,g=i.width,v=i.height,D=m+g,_=f+v,k=0,E=0,A=l.width,C=l.height,V=!0,L;!y&&t.shiftKey&&(y=g&&v?g/v:1),this.limited&&(k=i.minLeft,E=i.minTop,A=k+Math.min(l.width,n.width,n.left+n.width),C=E+Math.min(l.height,n.height,n.top+n.height));var j=c[Object.keys(c)[0]],S={x:j.endX-j.startX,y:j.endY-j.startY},M=function(X){switch(X){case Ve:D+S.x>A&&(S.x=A-D);break;case Ce:m+S.x<k&&(S.x=k-m);break;case Se:f+S.y<E&&(S.y=E-f);break;case Ae:_+S.y>C&&(S.y=C-_);break}};switch(u){case Tt:m+=S.x,f+=S.y;break;case Ve:if(S.x>=0&&(D>=A||y&&(f<=E||_>=C))){V=!1;break}M(Ve),g+=S.x,g<0&&(u=Ce,g=-g,m-=g),y&&(v=g/y,f+=(i.height-v)/2);break;case Se:if(S.y<=0&&(f<=E||y&&(m<=k||D>=A))){V=!1;break}M(Se),v-=S.y,f+=S.y,v<0&&(u=Ae,v=-v,f-=v),y&&(g=v*y,m+=(i.width-g)/2);break;case Ce:if(S.x<=0&&(m<=k||y&&(f<=E||_>=C))){V=!1;break}M(Ce),g-=S.x,m+=S.x,g<0&&(u=Ve,g=-g,m-=g),y&&(v=g/y,f+=(i.height-v)/2);break;case Ae:if(S.y>=0&&(_>=C||y&&(m<=k||D>=A))){V=!1;break}M(Ae),v+=S.y,v<0&&(u=Se,v=-v,f-=v),y&&(g=v*y,m+=(i.width-g)/2);break;case We:if(y){if(S.y<=0&&(f<=E||D>=A)){V=!1;break}M(Se),v-=S.y,f+=S.y,g=v*y}else M(Se),M(Ve),S.x>=0?D<A?g+=S.x:S.y<=0&&f<=E&&(V=!1):g+=S.x,S.y<=0?f>E&&(v-=S.y,f+=S.y):(v-=S.y,f+=S.y);g<0&&v<0?(u=Ge,v=-v,g=-g,f-=v,m-=g):g<0?(u=Xe,g=-g,m-=g):v<0&&(u=qe,v=-v,f-=v);break;case Xe:if(y){if(S.y<=0&&(f<=E||m<=k)){V=!1;break}M(Se),v-=S.y,f+=S.y,g=v*y,m+=i.width-g}else M(Se),M(Ce),S.x<=0?m>k?(g-=S.x,m+=S.x):S.y<=0&&f<=E&&(V=!1):(g-=S.x,m+=S.x),S.y<=0?f>E&&(v-=S.y,f+=S.y):(v-=S.y,f+=S.y);g<0&&v<0?(u=qe,v=-v,g=-g,f-=v,m-=g):g<0?(u=We,g=-g,m-=g):v<0&&(u=Ge,v=-v,f-=v);break;case Ge:if(y){if(S.x<=0&&(m<=k||_>=C)){V=!1;break}M(Ce),g-=S.x,m+=S.x,v=g/y}else M(Ae),M(Ce),S.x<=0?m>k?(g-=S.x,m+=S.x):S.y>=0&&_>=C&&(V=!1):(g-=S.x,m+=S.x),S.y>=0?_<C&&(v+=S.y):v+=S.y;g<0&&v<0?(u=We,v=-v,g=-g,f-=v,m-=g):g<0?(u=qe,g=-g,m-=g):v<0&&(u=Xe,v=-v,f-=v);break;case qe:if(y){if(S.x>=0&&(D>=A||_>=C)){V=!1;break}M(Ve),g+=S.x,v=g/y}else M(Ae),M(Ve),S.x>=0?D<A?g+=S.x:S.y>=0&&_>=C&&(V=!1):g+=S.x,S.y>=0?_<C&&(v+=S.y):v+=S.y;g<0&&v<0?(u=Xe,v=-v,g=-g,f-=v,m-=g):g<0?(u=Ge,g=-g,m-=g):v<0&&(u=We,v=-v,f-=v);break;case Ir:this.move(S.x,S.y),V=!1;break;case Pr:this.zoom(el(c),t),V=!1;break;case jr:if(!S.x||!S.y){V=!1;break}L=ao(this.cropper),m=j.startX-L.left,f=j.startY-L.top,g=i.minWidth,v=i.minHeight,S.x>0?u=S.y>0?qe:We:S.x<0&&(m-=g,u=S.y>0?Ge:Xe),S.y<0&&(f-=v),this.cropped||(ge(this.cropBox,te),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}V&&(i.width=g,i.height=v,i.left=m,i.top=f,this.action=u,this.renderCropBox()),W(c,function(R){R.startX=R.endX,R.startY=R.endY})}},pl={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&J(this.dragBox,ut),ge(this.cropBox,te),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=U({},this.initialImageData),this.canvasData=U({},this.initialCanvasData),this.cropBoxData=U({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(U(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ge(this.dragBox,ut),J(this.cropBox,te)),this},replace:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),o?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,W(this.previews,function(n){n.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ge(this.cropper,zr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,J(this.cropper,zr)),this},destroy:function(){var t=this.element;return t[F]?(t[F]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.canvasData,l=n.left,i=n.top;return this.moveTo(Rt(t)?t:l+Number(t),Rt(o)?o:i+Number(o))},moveTo:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.canvasData,l=!1;return t=Number(t),o=Number(o),this.ready&&!this.disabled&&this.options.movable&&(O(t)&&(n.left=t,l=!0),O(o)&&(n.top=o,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,o){var n=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(n.width*t/n.naturalWidth,null,o)},zoomTo:function(t,o,n){var l=this.options,i=this.canvasData,c=i.width,u=i.height,y=i.naturalWidth,m=i.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&l.zoomable){var f=y*t,g=m*t;if(Ie(this.element,Ht,{ratio:t,oldRatio:c/y,originalEvent:n})===!1)return this;if(n){var v=this.pointers,D=ao(this.cropper),_=v&&Object.keys(v).length?tl(v):{pageX:n.pageX,pageY:n.pageY};i.left-=(f-c)*((_.pageX-D.left-i.left)/c),i.top-=(g-u)*((_.pageY-D.top-i.top)/u)}else Le(o)&&O(o.x)&&O(o.y)?(i.left-=(f-c)*((o.x-i.left)/c),i.top-=(g-u)*((o.y-i.top)/u)):(i.left-=(f-c)/2,i.top-=(g-u)/2);i.width=f,i.height=g,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),O(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var o=this.imageData.scaleY;return this.scale(t,O(o)?o:1)},scaleY:function(t){var o=this.imageData.scaleX;return this.scale(O(o)?o:1,t)},scale:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=this.imageData,l=!1;return t=Number(t),o=Number(o),this.ready&&!this.disabled&&this.options.scalable&&(O(t)&&(n.scaleX=t,l=!0),O(o)&&(n.scaleY=o,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=this.options,n=this.imageData,l=this.canvasData,i=this.cropBoxData,c;if(this.ready&&this.cropped){c={x:i.left-l.left,y:i.top-l.top,width:i.width,height:i.height};var u=n.width/n.naturalWidth;if(W(c,function(f,g){c[g]=f/u}),t){var y=Math.round(c.y+c.height),m=Math.round(c.x+c.width);c.x=Math.round(c.x),c.y=Math.round(c.y),c.width=m-c.x,c.height=y-c.y}}else c={x:0,y:0,width:0,height:0};return o.rotatable&&(c.rotate=n.rotate||0),o.scalable&&(c.scaleX=n.scaleX||1,c.scaleY=n.scaleY||1),c},setData:function(t){var o=this.options,n=this.imageData,l=this.canvasData,i={};if(this.ready&&!this.disabled&&Le(t)){var c=!1;o.rotatable&&O(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,c=!0),o.scalable&&(O(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,c=!0),O(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,c=!0)),c&&this.renderCanvas(!0,!0);var u=n.width/n.naturalWidth;O(t.x)&&(i.left=t.x*u+l.left),O(t.y)&&(i.top=t.y*u+l.top),O(t.width)&&(i.width=t.width*u),O(t.height)&&(i.height=t.height*u),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?U({},this.containerData):{}},getImageData:function(){return this.sized?U({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,o={};return this.ready&&W(["left","top","width","height","naturalWidth","naturalHeight"],function(n){o[n]=t[n]}),o},setCanvasData:function(t){var o=this.canvasData,n=o.aspectRatio;return this.ready&&!this.disabled&&Le(t)&&(O(t.left)&&(o.left=t.left),O(t.top)&&(o.top=t.top),O(t.width)?(o.width=t.width,o.height=t.width/n):O(t.height)&&(o.height=t.height,o.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,o;return this.ready&&this.cropped&&(o={left:t.left,top:t.top,width:t.width,height:t.height}),o||{}},setCropBoxData:function(t){var o=this.cropBoxData,n=this.options.aspectRatio,l,i;return this.ready&&this.cropped&&!this.disabled&&Le(t)&&(O(t.left)&&(o.left=t.left),O(t.top)&&(o.top=t.top),O(t.width)&&t.width!==o.width&&(l=!0,o.width=t.width),O(t.height)&&t.height!==o.height&&(i=!0,o.height=t.height),n&&(l?o.height=o.width/n:i&&(o.width=o.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var o=this.canvasData,n=ol(this.image,this.imageData,o,t);if(!this.cropped)return n;var l=this.getData(),i=l.x,c=l.y,u=l.width,y=l.height,m=n.width/Math.floor(o.naturalWidth);m!==1&&(i*=m,c*=m,u*=m,y*=m);var f=u/y,g=ke({aspectRatio:f,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),v=ke({aspectRatio:f,width:t.minWidth||0,height:t.minHeight||0},"cover"),D=ke({aspectRatio:f,width:t.width||(m!==1?n.width:u),height:t.height||(m!==1?n.height:y)}),_=D.width,k=D.height;_=Math.min(g.width,Math.max(v.width,_)),k=Math.min(g.height,Math.max(v.height,k));var E=document.createElement("canvas"),A=E.getContext("2d");E.width=Oe(_),E.height=Oe(k),A.fillStyle=t.fillColor||"transparent",A.fillRect(0,0,_,k);var C=t.imageSmoothingEnabled,V=C===void 0?!0:C,L=t.imageSmoothingQuality;A.imageSmoothingEnabled=V,L&&(A.imageSmoothingQuality=L);var j=n.width,S=n.height,M=i,R=c,X,q,oe,se,ae,H;M<=-u||M>j?(M=0,X=0,oe=0,ae=0):M<=0?(oe=-M,M=0,X=Math.min(j,u+M),ae=X):M<=j&&(oe=0,X=Math.min(u,j-M),ae=X),X<=0||R<=-y||R>S?(R=0,q=0,se=0,H=0):R<=0?(se=-R,R=0,q=Math.min(S,y+R),H=q):R<=S&&(se=0,q=Math.min(y,S-R),H=q);var N=[M,R,X,q];if(ae>0&&H>0){var T=_/u;N.push(oe*T,se*T,ae*T,H*T)}return A.drawImage.apply(A,[n].concat(Or(N.map(function($){return Math.floor(Oe($))})))),E},setAspectRatio:function(t){var o=this.options;return!this.disabled&&!Rt(t)&&(o.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var o=this.options,n=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var i=t===Ot,c=o.movable&&t===Rr;t=i||c?t:Fr,o.dragMode=t,Ze(n,Je,t),je(n,At,i),je(n,Lt,c),o.cropBoxMovable||(Ze(l,Je,t),je(l,At,i),je(l,Lt,c))}return this}},gl=pe.Cropper,co=function(){function r(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Cs(this,r),!t||!Fs.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=U({},eo,Le(o)&&o),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ms(r,[{key:"init",value:function(){var o=this.element,n=o.tagName.toLowerCase(),l;if(!o[F]){if(o[F]=this,n==="img"){if(this.isImg=!0,l=o.getAttribute("src")||"",this.originalUrl=l,!l)return;l=o.src}else n==="canvas"&&window.HTMLCanvasElement&&(l=o.toDataURL());this.load(l)}}},{key:"load",value:function(o){var n=this;if(!!o){this.url=o,this.imageData={};var l=this.element,i=this.options;if(!i.rotatable&&!i.scalable&&(i.checkOrientation=!1),!i.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Hs.test(o)){Rs.test(o)?this.read(il(o)):this.clone();return}var c=new XMLHttpRequest,u=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=u,c.onerror=u,c.ontimeout=u,c.onprogress=function(){c.getResponseHeader("content-type")!==Jr&&c.abort()},c.onload=function(){n.read(c.response)},c.onloadend=function(){n.reloading=!1,n.xhr=null},i.checkCrossOrigin&&io(o)&&l.crossOrigin&&(o=so(o)),c.open("GET",o,!0),c.responseType="arraybuffer",c.withCredentials=l.crossOrigin==="use-credentials",c.send()}}},{key:"read",value:function(o){var n=this.options,l=this.imageData,i=ll(o),c=0,u=1,y=1;if(i>1){this.url=sl(o,Jr);var m=cl(i);c=m.rotate,u=m.scaleX,y=m.scaleY}n.rotatable&&(l.rotate=c),n.scalable&&(l.scaleX=u,l.scaleY=y),this.clone()}},{key:"clone",value:function(){var o=this.element,n=this.url,l=o.crossOrigin,i=n;this.options.checkCrossOrigin&&io(n)&&(l||(l="anonymous"),i=so(n)),this.crossOrigin=l,this.crossOriginUrl=i;var c=document.createElement("img");l&&(c.crossOrigin=l),c.src=i||n,c.alt=o.alt||"The image to crop",this.image=c,c.onload=this.start.bind(this),c.onerror=this.stop.bind(this),J(c,Hr),o.parentNode.insertBefore(c,o.nextSibling)}},{key:"start",value:function(){var o=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var l=pe.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(pe.navigator.userAgent),i=function(m,f){U(o.imageData,{naturalWidth:m,naturalHeight:f,aspectRatio:m/f}),o.initialImageData=U({},o.imageData),o.sizing=!1,o.sized=!0,o.build()};if(n.naturalWidth&&!l){i(n.naturalWidth,n.naturalHeight);return}var c=document.createElement("img"),u=document.body||document.documentElement;this.sizingImage=c,c.onload=function(){i(c.width,c.height),l||u.removeChild(c)},c.src=n.src,l||(c.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",u.appendChild(c))}},{key:"stop",value:function(){var o=this.image;o.onload=null,o.onerror=null,o.parentNode.removeChild(o),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var o=this.element,n=this.options,l=this.image,i=o.parentNode,c=document.createElement("div");c.innerHTML=Us;var u=c.querySelector(".".concat(F,"-container")),y=u.querySelector(".".concat(F,"-canvas")),m=u.querySelector(".".concat(F,"-drag-box")),f=u.querySelector(".".concat(F,"-crop-box")),g=f.querySelector(".".concat(F,"-face"));this.container=i,this.cropper=u,this.canvas=y,this.dragBox=m,this.cropBox=f,this.viewBox=u.querySelector(".".concat(F,"-view-box")),this.face=g,y.appendChild(l),J(o,te),i.insertBefore(u,o.nextSibling),this.isImg||ge(l,Hr),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,J(f,te),n.guides||J(f.getElementsByClassName("".concat(F,"-dashed")),te),n.center||J(f.getElementsByClassName("".concat(F,"-center")),te),n.background&&J(u,"".concat(F,"-bg")),n.highlight||J(g,Os),n.cropBoxMovable&&(J(g,Lt),Ze(g,Je,Tt)),n.cropBoxResizable||(J(f.getElementsByClassName("".concat(F,"-line")),te),J(f.getElementsByClassName("".concat(F,"-point")),te)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),re(n.ready)&&ie(o,Xr,n.ready,{once:!0}),Ie(o,Xr)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),ge(this.element,te))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=gl,r}},{key:"setDefaults",value:function(o){U(eo,Le(o)&&o)}}]),r}();U(co.prototype,dl,hl,ul,fl,ml,pl);const yl={class:"flex"},bl=["aria-label"],vl={class:"ml-auto mb-2"},wl={class:"w-full flex justify-center"},Sl=["src"],_l={__name:"Image",props:{selection:Object},emits:["load"],setup(r,{emit:t}){const o=r,n=e.inject("accessToken"),{t:l}=e.inject("i18n"),{apiUrl:i}=he(),c=e.ref(null),u=e.ref(null),y=e.ref(!1),m=e.ref(""),f=e.ref(!1),g=()=>{y.value=!y.value,y.value?u.value=new co(c.value,{crop(_){}}):u.value.destroy()},v=e.inject("postData"),D=()=>{u.value.getCroppedCanvas({width:795,height:341}).toBlob(_=>{m.value="",f.value=!1,ot(i.value,{method:"POST",params:Object.assign(v,{q:"upload",adapter:o.selection.adapter,path:o.selection.item.path,file:_}),name:o.selection.item.basename,json:!1,headers:{Authorization:n?"Bearer "+n:null}}).then(k=>{m.value=l("Updated."),c.value.src=Qt(o.selection.adapter,o.selection.item.path),g(),t("load")}).catch(k=>{m.value=l(k.message),f.value=!0})})};return e.onMounted(()=>{t("load")}),(_,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",yl,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":r.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(r.selection.item.basename),9,bl),e.createElementVNode("div",vl,[y.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:D,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:k[0]||(k[0]=E=>g())},e.toDisplayString(y.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)])]),e.createElementVNode("div",wl,[e.createElementVNode("img",{ref_key:"image",ref:c,class:"max-w-[50vh] max-h-[50vh]",src:e.unref(Qt)(o.selection.adapter,o.selection.item.path),alt:""},null,8,Sl)]),m.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:k[1]||(k[1]=E=>m.value=""),error:f.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)],64))}},kl={class:"flex"},xl=["aria-label"],Dl=e.createElementVNode("div",null,null,-1),El={__name:"Default",props:{selection:Object},emits:["load"],setup(r,{emit:t}){return e.onMounted(()=>{t("load")}),(o,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",kl,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":r.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(r.selection.item.basename),9,xl)]),Dl],64))}},Nl=["aria-label"],Vl={class:"w-full",preload:"",controls:""},Cl=["src"],Ml={__name:"Video",props:{selection:Object},emits:["load"],setup(r,{emit:t}){const o=r,{apiUrl:n}=he(),l=()=>n.value+"?"+De({q:"preview",adapter:o.selection.adapter,path:o.selection.item.path});return e.onMounted(()=>{t("load")}),(i,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":r.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(r.selection.item.basename),9,Nl),e.createElementVNode("div",null,[e.createElementVNode("video",Vl,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,Cl),e.createTextVNode(" Your browser does not support the video tag. ")])])],64))}},$l=["aria-label"],Bl={class:"w-full",controls:""},Tl=["src"],Al={__name:"Audio",props:{selection:Object},emits:["load"],setup(r,{emit:t}){const o=r,{apiUrl:n}=he(),l=()=>n.value+"?"+De({q:"preview",adapter:o.selection.adapter,path:o.selection.item.path});return e.onMounted(()=>{t("load")}),(i,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":r.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(r.selection.item.basename),9,$l),e.createElementVNode("div",null,[e.createElementVNode("audio",Bl,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,Tl),e.createTextVNode(" Your browser does not support the audio element. ")])])],64))}},Ll=["aria-label"],Ol=["data"],jl=["src"],Il={__name:"Pdf",props:{selection:Object},emits:["load"],setup(r,{emit:t}){const o=r,{apiUrl:n}=he(),l=()=>n.value+"?"+De({q:"preview",adapter:o.selection.adapter,path:o.selection.item.path});return e.onMounted(()=>{t("load")}),(i,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":r.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(r.selection.item.basename),9,Ll),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:l(),width:"100%",height:"100%"},`
          <p>
            Your browser does not support PDFs.
            <a href="https://example.com/test.pdf">Download the PDF</a>
            .
          </p>
        `,8,jl)],8,Ol)])],64))}},Pl={class:"sm:flex sm:items-start"},zl={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Hl={class:"text-gray-700 dark:text-gray-200 text-sm"},Rl={key:0,class:"flex leading-5"},Fl=e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Ul={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},Kl={class:"font-bold pl-2"},Yl={class:"font-bold pl-2"},Wl=Object.assign({name:"VFModalPreview"},{props:{selection:Object},setup(r){const t=r,{apiUrl:o}=he(),n=e.inject("emitter"),{t:l}=e.inject("i18n"),i=e.ref(!1),c=m=>i.value=m,u=m=>{var f;return((f=t.selection.item.mime_type)!=null?f:"").startsWith(m)},y=()=>{const m=o.value+"?"+De({q:"download",adapter:t.selection.adapter,path:t.selection.item.path});n.emit("vf-download",m)};return(m,f)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:f[6]||(f[6]=g=>e.unref(n).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Close")),1),e.createElementVNode("button",{type:"button",onClick:f[7]||(f[7]=g=>y()),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Download")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Pl,[e.createElementVNode("div",zl,[e.createElementVNode("div",null,[u("text")?(e.openBlock(),e.createBlock(Vs,{key:0,selection:r.selection,onLoad:f[0]||(f[0]=g=>c(!0))},null,8,["selection"])):u("image")?(e.openBlock(),e.createBlock(_l,{key:1,selection:r.selection,onLoad:f[1]||(f[1]=g=>c(!0))},null,8,["selection"])):u("video")?(e.openBlock(),e.createBlock(Ml,{key:2,selection:r.selection,onLoad:f[2]||(f[2]=g=>c(!0))},null,8,["selection"])):u("audio")?(e.openBlock(),e.createBlock(Al,{key:3,selection:r.selection,onLoad:f[3]||(f[3]=g=>c(!0))},null,8,["selection"])):u("application/pdf")?(e.openBlock(),e.createBlock(Il,{key:4,selection:r.selection,onLoad:f[4]||(f[4]=g=>c(!0))},null,8,["selection"])):(e.openBlock(),e.createBlock(El,{key:5,selection:r.selection,onLoad:f[5]||(f[5]=g=>c(!0))},null,8,["selection"]))]),e.createElementVNode("div",Hl,[i.value==!1?(e.openBlock(),e.createElementBlock("div",Rl,[Fl,e.createElementVNode("span",null,e.toDisplayString(e.unref(l)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Ul,[e.createElementVNode("div",null,[e.createElementVNode("span",Kl,e.toDisplayString(e.unref(l)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(Jt)(r.selection.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Yl,e.toDisplayString(e.unref(l)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Zt)(r.selection.item.last_modified)),1)])])]),_:1}))}}),Xl={class:"sm:flex sm:items-start"},ql=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),Gl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Jl={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Zl={class:"mt-2"},Ql={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},ec={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},tc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],rc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},oc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],nc={class:"ml-1.5"},ac=["onKeyup"],ic=Object.assign({name:"VFModalRename"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:l}=e.inject("i18n"),i=e.ref(t.selection.items[0]),c=e.ref(t.selection.items[0].basename),u=e.ref(""),y=()=>{c.value!=""&&o.emit("vf-fetch",{params:{q:"rename",adapter:n.value,path:t.current.dirname,item:i.value.path,name:c.value},onSuccess:()=>{o.emit("vf-toast-push",{label:l("%s is renamed.",c.value)})},onError:m=>{u.value=l(m.message)}})};return(m,f)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:f[2]||(f[2]=g=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Xl,[ql,e.createElementVNode("div",Gl,[e.createElementVNode("h3",Jl,e.toDisplayString(e.unref(l)("Rename")),1),e.createElementVNode("div",Zl,[e.createElementVNode("p",Ql,[i.value.type=="dir"?(e.openBlock(),e.createElementBlock("svg",ec,tc)):(e.openBlock(),e.createElementBlock("svg",rc,oc)),e.createElementVNode("span",nc,e.toDisplayString(i.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=g=>c.value=g),onKeyup:e.withKeys(y,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,ac),[[e.vModelText,c.value]]),u.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:f[1]||(f[1]=g=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),sc={class:"sm:flex sm:items-start"},lc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),cc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},dc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},hc={class:"mt-2"},uc={class:"text-gray-500 mb-1"},fc=["id"],mc={key:0,class:"py-2"},pc=["disabled","onClick"],gc=Object.assign({name:"VFModalUpload"},{props:{current:Object},setup(r){const t=r,o=e.inject("emitter"),{apiUrl:n}=he(),{t:l}=e.inject("i18n"),i=e.inject("accessToken"),c=e.ref(null),u=e.ref(null),y=e.ref(null),m=e.ref([]),f=e.ref(""),g=e.ref(!0),v=()=>{f.value="",c.value.start()},D=e.inject("postData");return e.onMounted(()=>{c.value=new gt.default.Uploader({runtimes:"html5",browse_button:y.value,container:u.value,max_file_size:"2Gb",multiple_queues:!0,file_data_name:"file",url:n.value+"?"+De(Object.assign(D,{q:"upload",adapter:t.current.adapter,path:t.current.dirname})),headers:{...rt&&{"X-CSRF-Token":rt},Authorization:i?"Bearer "+i:null},init:{PostInit:function(){},FilesAdded:function(_,k){g.value=!1,gt.default.each(k,function(E){m.value.push({id:E.id,name:E.name,size:gt.default.formatSize(E.size),percent:""})})},UploadProgress:function(_,k){m.value[m.value.findIndex(E=>E.id==k.id)].percent=k.percent+"%"},UploadComplete:function(){g.value=!0,o.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:t.current.dirname}})},Error:function(_,k){c.value.stop(),f.value=l(JSON.parse(k.response).message)}}}),c.value.init()}),(_,k)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{disabled:g.value,onClick:e.withModifiers(v,["prevent"]),type:"button",class:e.normalizeClass([g.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500","w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"])},e.toDisplayString(e.unref(l)("Upload")),11,pc),e.createElementVNode("button",{type:"button",onClick:k[1]||(k[1]=E=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",sc,[lc,e.createElementVNode("div",cc,[e.createElementVNode("h3",dc,e.toDisplayString(e.unref(l)("Upload files")),1),e.createElementVNode("div",hc,[e.createElementVNode("div",uc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,E=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{id:E.id},[e.createTextVNode(e.toDisplayString(E.name)+" ( "+e.toDisplayString(E.size)+") ",1),e.createElementVNode("b",null,e.toDisplayString(E.percent),1)],8,fc)]))),256)),m.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",mc,e.toDisplayString(e.unref(l)("No files selected!")),1))]),e.createElementVNode("div",{class:"text-gray-500",ref_key:"container",ref:u},[e.createElementVNode("button",{ref_key:"pickFiles",ref:y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Select Files")),513)],512),f.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:k[0]||(k[0]=E=>f.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),yc={class:"sm:flex sm:items-start"},bc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),vc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},wc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Sc={class:"mt-2"},_c={class:"flex text-sm text-gray-800 dark:text-gray-400"},kc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},xc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Dc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ec=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Nc={class:"ml-1.5"},Vc=["onKeyup","placeholder"],Cc=Object.assign({name:"VFModalArchive"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:l}=e.inject("i18n"),i=e.ref(""),c=e.ref(""),u=e.ref(t.selection.items),y=()=>{u.value.length&&o.emit("vf-fetch",{params:{q:"archive",adapter:n.value,path:t.current.dirname,items:JSON.stringify(u.value.map(({path:m,type:f})=>({path:m,type:f}))),name:i.value},onSuccess:()=>{o.emit("vf-toast-push",{label:l("The file(s) archived.")})},onError:m=>{c.value=l(m.message)}})};return(m,f)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:f[2]||(f[2]=g=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",yc,[bc,e.createElementVNode("div",vc,[e.createElementVNode("h3",wc,e.toDisplayString(e.unref(l)("Archive the files")),1),e.createElementVNode("div",Sc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,g=>(e.openBlock(),e.createElementBlock("p",_c,[g.type=="dir"?(e.openBlock(),e.createElementBlock("svg",kc,xc)):(e.openBlock(),e.createElementBlock("svg",Dc,Ec)),e.createElementVNode("span",Nc,e.toDisplayString(g.basename),1)]))),256)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=g=>i.value=g),onKeyup:e.withKeys(y,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(l)("Archive name. (.zip file will be created)"),type:"text"},null,40,Vc),[[e.vModelText,i.value]]),c.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:f[1]||(f[1]=g=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Mc={class:"sm:flex sm:items-start"},$c=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Bc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Tc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Ac={class:"mt-2"},Lc={class:"flex text-sm text-gray-800 dark:text-gray-400"},Oc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},jc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Ic={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Pc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],zc={class:"ml-1.5"},Hc={class:"my-1 text-sm text-gray-500"},Rc=Object.assign({name:"VFModalUnarchive"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:l}=e.inject("i18n");e.ref("");const i=e.ref(t.selection.items[0]),c=e.ref(""),u=e.ref([]),y=()=>{o.emit("vf-fetch",{params:{q:"unarchive",adapter:n.value,path:t.current.dirname,item:i.value.path},onSuccess:()=>{o.emit("vf-toast-push",{label:l("The file unarchived.")})},onError:m=>{c.value=l(m.message)}})};return(m,f)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:y,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:f[1]||(f[1]=g=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Mc,[$c,e.createElementVNode("div",Bc,[e.createElementVNode("h3",Tc,e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("div",Ac,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,g=>(e.openBlock(),e.createElementBlock("p",Lc,[g.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Oc,jc)):(e.openBlock(),e.createElementBlock("svg",Ic,Pc)),e.createElementVNode("span",zc,e.toDisplayString(g.basename),1)]))),256)),e.createElementVNode("p",Hc,e.toDisplayString(e.unref(l)("The archive will be unarchived at"))+" ("+e.toDisplayString(r.current.dirname)+")",1),c.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:f[0]||(f[0]=g=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Fc={class:"sm:flex sm:items-start"},Uc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),Kc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Yc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Wc={class:"mt-2"},Xc={class:"flex text-sm text-gray-800 dark:text-gray-400"},qc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Jc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Zc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Qc={class:"ml-1.5"},ed={class:"text-sm text-gray-500 pb-1 pt-3"},td={class:"flex text-sm text-gray-800 dark:text-gray-400"},rd=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),od={class:"ml-1.5 overflow-auto"},Yt={VueFinder:Bi,...Object.freeze(Object.defineProperty({__proto__:null,ModalDelete:Qi,ModalMessage:is,ModalNewFolder:ms,ModalNewFile:_s,ModalPreview:Wl,ModalRename:ic,ModalUpload:gc,ModalArchive:Cc,ModalUnarchive:Rc,ModalMove:Object.assign({name:"VFModalMove"},{props:{selection:Object,current:Object},setup(r){const t=r,o=e.inject("emitter"),{t:n}=e.inject("i18n");e.inject("storage");const l=e.inject("adapter"),i=e.ref(t.selection.items.from),c=e.ref(""),u=()=>{i.value.length&&o.emit("vf-fetch",{params:{q:"move",adapter:l.value,path:t.current.dirname,items:JSON.stringify(i.value.map(({path:y,type:m})=>({path:y,type:m}))),item:t.selection.items.to.path},onSuccess:()=>{o.emit("vf-toast-push",{label:n("Files moved.",t.selection.items.to.name)})},onError:y=>{c.value=n(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(fe,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(n)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=f=>e.unref(o).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Fc,[Uc,e.createElementVNode("div",Kc,[e.createElementVNode("h3",Yc,e.toDisplayString(e.unref(n)("Move files")),1),e.createElementVNode("div",Wc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,f=>(e.openBlock(),e.createElementBlock("p",Xc,[f.type=="dir"?(e.openBlock(),e.createElementBlock("svg",qc,Gc)):(e.openBlock(),e.createElementBlock("svg",Jc,Zc)),e.createElementVNode("span",Qc,e.toDisplayString(f.path),1)]))),256)),e.createElementVNode("p",ed,e.toDisplayString(e.unref(n)("Are you sure you want to move these files?")),1),e.createElementVNode("p",td,[rd,e.createElementVNode("span",od,e.toDisplayString(r.selection.items.to.path),1)]),c.value.length?(e.openBlock(),e.createBlock(me,{key:0,onHidden:m[0]||(m[0]=f=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}})},Symbol.toStringTag,{value:"Module"}))},Yh="",Wh="",nd={install(r){for(const t in Yt)if(Yt.hasOwnProperty(t)){const o=Yt[t];r.component(o.name,o)}}},ad=Object.freeze(Object.defineProperty({__proto__:null,default:`{
  "Language": "Language",
  "Create": "Create",
  "Close": "Close",
  "Cancel": "Cancel",
  "Save": "Save",
  "Edit": "Edit",
  "Crop": "Crop",
  "New Folder": "New Folder",
  "New File": "New File",
  "Rename": "Rename",
  "Delete": "Delete",
  "Upload": "Upload",
  "Download": "Download",
  "Archive": "Archive",
  "Unarchive": "Unarchive",
  "Open": "Open",
  "Open containing folder": "Open containing folder",
  "Refresh": "Refresh",
  "Preview": "Preview",
  "Dark Mode": "Dark Mode",
  "Toggle Full Screen": "Toggle Full Screen",
  "Change View": "Change View",
  "Storage" : "Storage",
  "Go up a directory": "Go up a directory",
  "Search anything..": "Search anything..",
  "Name": "Name",
  "Size": "Size",
  "Date": "Date",
  "Filepath": "Filepath",
  "About": "About",
  "Folder Name": "Folder Name",
  "File Name": "File Name",
  "Move files": "Move files",
  "Are you sure you want to move these files to?": "Are you sure you want to move these files to?",
  "Yes, Move!": "Yes, Move!",
  "Delete files": "Delete files",
  "Yes, Delete!": "Yes, Delete!",
  "Upload Files" : "Upload Files",
  "No files selected!": "No files selected!",
  "Select Files": "Select Files",
  "Archive the files": "Archive the files",
  "Unarchive the files": "Unarchive the files",
  "The archive will be unarchived at": "The archive will be unarchived at",
  "Archive name. (.zip file will be created)": "Archive name. (.zip file will be created)",
  "Vuefinder is a file manager component for vue 3.": "Vuefinder is a file manager component for vue 3.",
  "Create a new folder": "Create a new folder",
  "Create a new file": "Create a new file",
  "Are you sure you want to delete these files?": "Are you sure you want to delete these files?",
  "This action cannot be undone.": "This action cannot be undone.",
  "Search results for" : "Search results for",
  "item(s) selected.": "item(s) selected.",
  "%s is renamed." : "%s is renamed.",
  "This is a readonly storage." : "This is a readonly storage.",
  "%s is created." : "%s is created.",
  "Files moved." : "Files moved.",
  "Files deleted." : "Files deleted.",
  "The file unarchived." : "The file unarchived.",
  "The file(s) archived." : "The file(s) archived.",
  "Updated." : "Updated.",
  "No search result found." : "No search result found.",
  "Are you sure you want to move these files?" : "Are you sure you want to move these files?",
  "File Size": "File Size",
  "Last Modified": "Last Modified",
  "Drag&Drop: on": "Drag&Drop: on",
  "Drag&Drop: off": "Drag&Drop: off"
}
`},Symbol.toStringTag,{value:"Module"})),id=Object.freeze(Object.defineProperty({__proto__:null,default:`{
  "Language": "\u042F\u0437\u044B\u043A",
  "Create": "\u0421\u043E\u0437\u0434\u0430\u0442\u044C",
  "Close": "\u0417\u0430\u043A\u0440\u044B\u0442\u044C",
  "Cancel": "\u041E\u0442\u043C\u0435\u043D\u0430",
  "Save": "\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",
  "Edit": "\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",
  "Crop": "\u041E\u0431\u0440\u0435\u0437\u0430\u0442\u044C",
  "New Folder": "\u041D\u043E\u0432\u0430\u044F \u043F\u0430\u043F\u043A\u0430",
  "New File": "\u041D\u043E\u0432\u044B\u0439 \u0444\u0430\u0439\u043B",
  "Rename": "\u041F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u0442\u044C",
  "Delete": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C",
  "Upload": "\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C",
  "Download": "\u0421\u043A\u0430\u0447\u0430\u0442\u044C",
  "Archive": "\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C",
  "Unarchive": "\u0420\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C",
  "Open": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C",
  "Open containing folder": "\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0440\u0430\u0441\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435",
  "Refresh": "\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",
  "Preview": "\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",
  "Dark Mode": "\u0422\u0451\u043C\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C",
  "Toggle Full Screen": "\u041F\u043E\u043B\u043D\u044B\u0439 \u044D\u043A\u0440\u0430\u043D",
  "Change View": "\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0432\u0438\u0434",
  "Storage" : "\u0425\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435",
  "Go up a directory": "\u0412\u0432\u0435\u0440\u0445",
  "Search anything..": "\u041F\u043E\u0438\u0441\u043A...",
  "Name": "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",
  "Size": "\u0420\u0430\u0437\u043C\u0435\u0440",
  "Date": "\u0414\u0430\u0442\u0430",
  "Filepath": "\u041F\u0443\u0442\u044C \u0434\u043E \u0444\u0430\u0439\u043B\u0430",
  "About": "\u041E \u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442\u0435",
  "Folder Name": "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438",
  "File Name": "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u0430",
  "Move files": "\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B",
  "Are you sure you want to move these files to?": "\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u044D\u0442\u0438 \u0444\u0430\u0439\u043B\u044B \u0432?",
  "Yes, Move!": "\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C",
  "Delete files": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B",
  "Yes, Delete!": "\u0423\u0434\u0430\u043B\u0438\u0442\u044C",
  "Upload Files": "\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B",
  "No files selected!": "\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u044B!",
  "Select Files": "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B\u044B",
  "Archive the files": "\u0410\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0444\u0430\u0439\u043B\u044B",
  "Unarchive the files": "\u0420\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0444\u0430\u0439\u043B\u044B",
  "The archive will be unarchived at": "\u0410\u0440\u0445\u0438\u0432 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D \u0432",
  "Archive name. (.zip file will be created)": "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u0440\u0445\u0438\u0432\u0430. (\u0431\u0443\u0434\u0435\u0442 \u0441\u043E\u0437\u0434\u0430\u043D .zip \u0444\u0430\u0439\u043B)",
  "Vuefinder is a file manager component for vue 3.": "Vuefinder - \u0444\u0430\u0439\u043B\u043E\u0432\u044B\u0439 \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440, \u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442 \u0434\u043B\u044F vue 3.",
  "Create a new folder": "\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u043F\u0430\u043F\u043A\u0443",
  "Create a new file": "\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0444\u0430\u0439\u043B",
  "Are you sure you want to delete these files?": "\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u0438 \u0444\u0430\u0439\u043B\u044B?",
  "This action cannot be undone.": "\u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.",
  "Search results for": "\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u043E",
  "item(s) selected.": "\u0432\u044B\u0431\u0440\u0430\u043D\u044B.",
  "%s is renamed.": "%s \u043F\u0435\u0440\u0435\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D.",
  "This is a readonly storage.": "\u0414\u0430\u043D\u043D\u043E\u0435 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F \u0447\u0442\u0435\u043D\u0438\u044F.",
  "%s is created.": "%s \u0441\u043E\u0437\u0434\u0430\u043D.",
  "Files moved.": "\u0424\u0430\u0439\u043B\u044B \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u044B.",
  "Files deleted.": "\u0424\u0430\u0439\u043B\u044B \u0443\u0434\u0430\u043B\u0435\u043D\u044B.",
  "The file unarchived.": "\u0424\u0430\u0439\u043B \u0440\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D",
  "The file(s) archived.": "\u0424\u0430\u0439\u043B(-\u044B) \u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u044B",
  "Updated.": "\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E.",
  "No search result found.": "\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E",
  "Are you sure you want to move these files?": "\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u044D\u0442\u0438 \u0444\u0430\u0439\u043B\u044B?",
  "File Size": "\u0420\u0430\u0437\u043C\u0435\u0440 \u0444\u0430\u0439\u043B\u0430",
  "Last Modified": "\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435",
  "Drag&Drop: on": "Drag&Drop: on",
  "Drag&Drop: off": "Drag&Drop: off"
}
`},Symbol.toStringTag,{value:"Module"})),sd=Object.freeze(Object.defineProperty({__proto__:null,default:`{
  "Language": "Dil",
  "Create": "Olu\u015Ftur",
  "Close": "Kapat",
  "Cancel": "\u0130ptal",
  "Save": "Kaydet",
  "Edit": "D\xFCzenle",
  "Crop": "Kes",
  "New Folder": "Yeni Klas\xF6r",
  "New File": "Yeni Dosya",
  "Rename": "Yeniden Adland\u0131r",
  "Delete": "Sil",
  "Upload": "Kar\u015F\u0131ya Y\xFCkle",
  "Download": "\u0130ndir",
  "Archive": "Ar\u015Fivle",
  "Unarchive": "Ar\u015Fivden \xE7\u0131kar",
  "Open": "A\xE7",
  "Open containing folder": "\u0130\xE7eren klas\xF6r\xFC a\xE7",
  "Refresh": "Yenile",
  "Preview": "\xD6nizleme",
  "Dark Mode": "Karanl\u0131k Mod",
  "Toggle Full Screen": "Tam ekran",
  "Change View": "G\xF6r\xFCn\xFCm\xFC de\u011Fi\u015Ftir",
  "Storage": "Depo",
  "Go up a directory": "Yukar\u0131 git",
  "Search anything..": "Herhangi bir \u015Fey ara..",
  "Name": "Ad",
  "Size": "Boyut",
  "Date": "Tarih",
  "Filepath": "Dosya yolu",
  "About": "Hakk\u0131nda",
  "Folder Name": "Klas\xF6r Ad\u0131",
  "File Name": "Dosya Ad\u0131",
  "Move files": "Dosyalar\u0131 ta\u015F\u0131",
  "Are you sure you want to move these files to?": "Bu dosyalar\u0131 ta\u015F\u0131mak istedi\u011Finizden emin misiniz?",
  "Yes, Move!": "Evet, Ta\u015F\u0131!",
  "Delete files": "Dosyalar\u0131 Sil",
  "Yes, Delete!": "Evet, Sil!",
  "Upload files": "Dosyalar\u0131 Y\xFCkle",
  "No files selected!": "Dosya Se\xE7ilmedi!",
  "Select Files": "Dosyalar\u0131 Se\xE7",
  "Archive the files": "Dosyalar\u0131 ar\u015Fivleyin",
  "Unarchive the files": "Dosyalar\u0131 ar\u015Fivden \xE7\u0131kar\u0131n",
  "The archive will be unarchived at": "Ar\u015Fiv buraya \xE7\u0131kar\u0131lacak: ",
  "Archive name. (.zip file will be created)": "Archive ad\u0131. (.zip dosyas\u0131 olu\u015Fturulacak)",
  "Vuefinder is a file manager component for vue 3.": "Vuefinder, vue 3 i\xE7in bir web dosya y\xF6netim bile\u015Fenidir.",
  "Create a new folder": "Yeni bir klas\xF6r olu\u015Fturun",
  "Create a new file": "Yeni bir dosya olu\u015Fturun",
  "Are you sure you want to delete these files?": "Bu dosyalar\u0131 silmek istedi\u011Finize emin misiniz?",
  "This action cannot be undone.": "Bu i\u015Flem geri al\u0131namaz.",
  "Search results for": "Arama sonu\xE7lar\u0131:",
  "item(s) selected.": "dosya se\xE7ildi.",
  "%s is renamed." : "%s yeniden adland\u0131r\u0131lm\u0131\u015Ft\u0131r.",
  "This is a readonly storage." : "Bu salt okunur bir depolama alan\u0131d\u0131r.",
  "%s is created." : "%s ba\u015Far\u0131yla olu\u015Fturulmu\u015Ftur.",
  "Files moved." : "Dosyalar ta\u015F\u0131nd\u0131.",
  "Files deleted." : "Dosyalar silindi.",
  "The file is unarchived." : "Dosya ar\u015Fivden \xE7\u0131kar\u0131ld\u0131.",
  "The file(s) is archived." : "Dosyalar ar\u015Fivlendi.",
  "Updated." : "G\xFCncellendi.",
  "No search result found." : "Arama sonucu bulunamad\u0131.",
  "Are you sure you want to move these files?" : "Bu dosyalar\u0131 ta\u015F\u0131mak istedi\u011Finize emin misiniz?",
  "File Size": "Dosya Boyutu",
  "Last Modified": "Son De\u011Fi\u015Fiklik",
  "Drag&Drop: on": "S\xFCr\xFCkle&B\u0131rak: etkin",
  "Drag&Drop: off": "S\xFCr\xFCkle&B\u0131rak: devre d\u0131\u015F\u0131"
}
`},Symbol.toStringTag,{value:"Module"}));return nd});
